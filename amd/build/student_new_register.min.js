define(["jquery","block_ases/bootstrap","block_ases/tagging","block_ases/smart_wizard","block_ases/mustache","block_ases/sweetalert","block_ases/select2"],function(a,b,c,d,e,f,g){return{init:function(){a(document).ready(function(){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q="",r="",s="",t="",u="",v="",w=!1,x=!1,y=!1,z=!1;function A(){a(".select_modal").select2({width:"resolve",height:"resolve",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando.."}}})}function B(){S(a("#select_programa"),"get_programas_academicos")}function C(){q="",r="",s="",d="",e="",f="",t="",u="",v="",g=!1,h=!1,w=!1,i=!1,x=!1,j=!1,k=!1,y=!1,l=!1,m=!1,n=!1,o=!1,p=!1,z=!1,a("#step-1 :input").prop("disabled",!0),a("#codigo_estudiantil").prop("disabled",!1),a("#validar_codigo").prop("disabled",!1),a("#limpiar_form").prop("disabled",!1),a("#nombre").val(""),a("#apellido").val(""),a("#emailinstitucional").val(""),a("#emailpilos_modal").val(""),T("step-1"),T("step-2"),T("step-3"),T("div_educ_media"),T("step-4"),T("step-5"),T("step-6"),a("#select_programa").empty(),B(),ah("step1"),L("deportes",[]),L("actividades",[]),a("#table_familia").find("tbody tr").remove(),a("#table_ingresos").find("tbody tr").remove(),a("#smartwizard").smartWizard("reset")}function D(){g?a("#step-1 :input").prop("disabled",!1):(a("#nombre").prop("disabled",!0),a("#apellido").prop("disabled",!0),a("#emailinstitucional").prop("disabled",!0)),a("#edad").prop("disabled",!0)}function E(f){var b=new Date,c=new Date(f),d=b.getFullYear()-c.getFullYear(),e=b.getMonth()-c.getMonth();(e<0||0===e&&b.getDate()<c.getDate())&&d--,a("#edad").val(d)}function F(d,e,b){let c="";c+='<tr><td> <input id="nom'+b+'" class="input_fields_general_tab_modal tabl_famiia"  type="text"/></td>',c+='<td> <input id="rol'+b+'" class="input_fields_general_tab_modal tabl_famiia"  type="text" /></td>',c+='<td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',a("#table_familia").find("tbody").append(c),a("#nom"+b).val(d),a("#rol"+b).val(e),ac("tabl_famiia")}a("#step-1 :input").prop("disabled",!0),a("#codigo_estudiantil").prop("disabled",!1),a("#validar_codigo").prop("disabled",!1),a("#limpiar_form").prop("disabled",!1),a("#pruebas").on("click",function(){}),a("#mostrar").on("click",function(){S(a("#id_ciudad_ini"),"get_ciudades"),S(a("#acompanamientos"),"get_otros_acompa\xf1amientos"),S(a("#id_cond_excepcion"),"get_cond_excepcion"),S(a("#id_estado_civil"),"get_estados_civiles"),S(a("#sexo"),"get_sex_options"),S(a("#id_identidad_gen"),"get_generos"),S(a("#id_act_simultanea"),"get_act_simultaneas"),S(a("#id_etnia"),"get_etnias"),S(a("#tipo_doc"),"get_document_types"),S(a("#id_discapacidad"),"get_discapacities"),S(a("#id_pais"),"get_paises"),S(a("#barrio_res"),"get_barrios"),S(a("#id_ciudad_res"),"get_ciudades"),B(),S(a("#id_pais_res"),"get_paises"),S(a("#barrio_ini"),"get_barrios"),S(a("#tipo_doc_ini"),"get_document_types"),S(a("#select_sede"),"get_sedes"),aa("permanencia","solvencia_econo"),aa("set-desplazamiento","ayuda_transporte"),aa("set-certificado-discapacidad","discapacidad"),aa("set-apoyo","apoyo_partic"),aa("set-participacion","participacion"),aa("set-salud","condicion"),ab("set-orientacion","orientacion_sexual"),ab("set-identidad-gen","identidad_genero"),aa("set-beca","beca"),(b=new Tagging(a("#deportes_tag"),a("#tags_deportes"),1,3)).createTag(),(c=new Tagging(a("#tiempo_libre"),a("#tags_tiempo_libre"))).createTag(),A(),a("#modalExample").show(),document.body.style.overflowY="hidden"}),a(".closer").on("click",function(){a("#modalExample").hide(),document.body.style.overflowY="visible"}),a("#smartwizard").smartWizard({selected:0,theme:"dots",autoAdjustHeight:!0,showStepURLhash:!1,lang:{next:"Continuar y Guardar",previous:"Anterior"}}),a("#limpiar_form").on("click",function(){C()}),a("#validar_codigo").on("click",function(){var c=a("#codigo_estudiantil").val();ah("step1");var b=a("#set-identidad-gen .otro").parent().next();b.attr("hidden",!0),b.addClass("otros");var b=a("#set-orientacion .otro").parent().next();b.attr("hidden",!0),b.addClass("otros"),""===c||" "===c?(a("#nombre").val(""),a("#apellido").val(""),a("#emailinstitucional").val(""),a("#step-1 :input").prop("disabled",!0),a("#codigo_estudiantil").prop("disabled",!1),a("#validar_codigo").prop("disabled",!1),a("#limpiar_form").prop("disabled",!1),B()):a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_user",params:c}),url:"../managers/student_profile/studentprofile_api.php",success:function(d){var c,b;!1!=(c=JSON.parse(d))?(a("#step-1 :input").prop("disabled",!0),a("#codigo_estudiantil").prop("disabled",!1),a("#validar_codigo").prop("disabled",!1),a("#limpiar_form").prop("disabled",!1),a("#tipo_doc_ini").prop("disabled",!1),a("#num_doc_ini").prop("disabled",!1),a("#select_sede").prop("disabled",!1),a("#select_programa").prop("disabled",!1),b=c,a("#nombre").val(b.firstname),a("#apellido").val(b.lastname),a("#emailinstitucional").val(b.email),D(),programs=b.username.slice(b.username.indexOf("-")+1),a("#select_programa").empty(),S(a("#select_programa"),"get_programas_academicos_est",programs),h=!1,g=!1):swal({title:"Warning",text:"Estudiante inexistente en la base de datos, \xbfEsta seguro de registrar este usuario?.",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!1},function(b){b?(swal({title:"Confirmado",text:"",type:"success",timer:1500}),g=!0,h=!1,T("step-2"),T("step-3"),T("div_educ_media"),T("step-4"),T("step-5"),T("step-6"),D()):(swal({title:"Cancelado",text:"Ingresa nuevamente el codigo del estudiante",type:"error",timer:1500}),a("#codigo_estudiantil").val(""))})},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}),a("#fecha_nac_modal").blur(function(){var b=a("#fecha_nac_modal").val();E(b)}),a(document).on("click",".remove_fila",function(){m=!0,a(this).parent().parent().remove()}),a(document).on("click",".remove_fila_ing",function(){n=!0,G--,a(this).parent().parent().remove()}),a("#add_person_r").on("click",function(){var c;let b;m=!0,c=a("#table_familia"),b="",b+='<tr><td> <input  class="input_fields_general_tab_modal tabl_famiia"  type="text"/></td>',b+='<td> <input  class="input_fields_general_tab_modal tabl_famiia"  type="text" /></td>',b+='<td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',c.find("tbody").append(b),ac("tabl_famiia")}),a("#add_ingreso").on("click",function(){n=!0,G++,H(a("#table_ingresos"))}),a(document).on("click","#guardar_info",function(){k?z&&(ak(),z=!1):(aj(),k=!0,z=!1)});var G=0;function H(c){let b="";b+='<tr><td> <input id="anio_'+G+'" class="input_fields_general_tab_modal ingresos_u tabl_ing" name="anio_'+G+'"  type="text"/></td>',b+='<td> <select id="s_programa_'+G+'" class="custom-select select-academics-data select_modal tabl_ing"></select> <input  id="id_programa_'+G+'" name="id_programa_'+G+'" class="ingresos_u" type="number" hidden></td>',b+='<td><select id="motivo_I'+G+'" class="custom-select select-academics-data select_modal tabl_ing"> <option value="1">Bajos acad\xe9micos</option> <option value="2">Condici\xf3n de salud</option> <option value="3">Fallecimiento</option> <option value="4">Condici\xf3n econ\xf3mica</option> <option value="5">Condici\xf3n de programa acad\xe9mico</option> <option value="6">Cambio de instituci\xf3n educativa</option> <option value="7">Cambio de ciudad</option> <option value="8">Retiro voluntario</option> <option value="9">Prefiero no decirlo</option> </select> <input  id="motivo_'+G+'" name="motivo_'+G+'" class="ingresos_u" type="number" hidden> </td>',b+='<td> <button class="btn btn-danger remove_fila_ing" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',c.find("tbody").append(b),S(a("#s_programa_"+G),"get_programas_academicos"),A(),ac("tabl_ing")}function I(b,d,f,e){let c="";c+='<tr><td> <input id="anio_'+b+'" class="input_fields_general_tab_modal ingresos_u tabl_ing" name="anio_'+b+'"  type="text"/></td>',c+='<td> <select id="s_programa_'+b+'" class="custom-select select-academics-data select_modal tabl_ing"></select> <input  id="id_programa_'+b+'" name="id_programa_'+b+'" class="ingresos_u" type="number" hidden></td>',c+='<td><select id="motivo_I'+b+'" class="custom-select select-academics-data select_modal tabl_ing"> <option value="1">Bajos acad\xe9micos</option> <option value="2">Condici\xf3n de salud</option> <option value="3">Fallecimiento</option> <option value="4">Condici\xf3n econ\xf3mica</option> <option value="5">Condici\xf3n de programa acad\xe9mico</option> <option value="6">Cambio de instituci\xf3n educativa</option> <option value="7">Cambio de ciudad</option> <option value="8">Retiro voluntario</option> <option value="9">Prefiero no decirlo</option> </select> <input id="motivo_'+b+'" name="motivo_'+b+'" class="ingresos_u" type="number" hidden> </td>',c+='<td> <button class="btn btn-danger remove_fila_ing" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',a("#table_ingresos").find("tbody").append(c),S(a("#s_programa_"+b),"get_programas_academicos"),a("#anio_"+b).val(d),setTimeout(()=>{a("#s_programa_"+b).val(f)},1e3),a("#motivo_I"+b).val(e),G=b,ac("tabl_ing")}function J(e){for(var d=[],c=e.find("tbody input").map(function(){return a(this).val()}).get(),b=0;b<c.length;b+=2){var f={nombre:c[b],rol:c[b+1]};d.push(f)}return d}function K(b,c){a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_ases_user_id",params:b}),url:"../managers/student_profile/studentprofile_api.php",success:function(b){var d,e,a=JSON.parse(b);null==c?r=d=a.id:1==c&&(s=e=a)},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function L(e,d){"deportes"==e?b.displayTags(d,a("#tags_deportes")):c.displayTags(d,a("#tags_tiempo_libre"))}function M(b,c){a("input:radio[name="+b+"]").filter("[value="+c+"]").attr("checked",!0)}function N(b){a("input[name="+b+"]").attr("checked",!0)}function O(b,c){a.ajax({async:!1,type:"POST",data:JSON.stringify({function:c,params:b}),url:"../managers/student_profile/studentprofile_api.php",success:function(b){var a=JSON.parse(b);"exist_academics_data"==c?x=a:"exist_health_data"==c?k=a:"exist_discapacity_data"==c&&(j=a)},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function P(b,c){a.ajax({async:!1,type:"POST",data:JSON.stringify({function:c,params:b}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){var b;v=b=JSON.parse(a)},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function Q(c){switch(c){case"solvencia_econo":var b=a("#permanencia .otro").parent().next();b.attr("hidden",!1),b.removeClass("otros");break;case"ayuda_transporte":var b=a("#set-desplazamiento .otro").parent().next();b.attr("hidden",!1),b.removeClass("otros");break;case"beca":var b=a("#set-beca .otro").parent().next();b.attr("hidden",!1),b.removeClass("otros");break;case"participacion":var b=a("#set-participacion .otro").parent().next();b.attr("hidden",!1),b.removeClass("otros");break;case"condicion":var b=a("#set-salud .otro").parent().next();b.attr("hidden",!1),b.removeClass("otros");break;case"apoyo_partic":var b=a("#set-apoyo .otro").parent().next();b.attr("hidden",!1),b.removeClass("otros");break;case"discapacidad":var b=a("#set-certificado-discapacidad .otro").parent().next();b.attr("hidden",!1),b.removeClass("otros");break;case"identidad_genero":var b=a("#set-identidad-gen .otro").parent().next();b.attr("hidden",!1),b.removeClass("otros");break;case"orientacion_sexual":var b=a("#set-orientacion .otro").parent().next();b.attr("hidden",!1),b.removeClass("otros")}}function R(b){a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_user",params:b}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){var b;q=b=JSON.parse(a).id},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function S(e,d,b){var c="1";null!=b&&(c=b),a.ajax({type:"POST",data:JSON.stringify({function:d,params:c}),url:"../managers/student_profile/studentprofile_api.php",success:function(c){var a=JSON.parse(c);for(var b in a)e.append("<option value='"+a[b].id+"'>"+Object.values(a[b])[1]+"</option>")},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function T(b){a("#"+b).find("input").each(function(){var b=a(this).attr("type");switch(b){case"text":case"number":case"date":""!=a(this).val()&&a(this).val("");break;case"radio":let c=a(this).attr("name");a(this).is(":checked")&&a(this).attr("checked",!1),a(this).hasClass("otro")&&function(c){switch(c){case"solvencia_econo":var b=a("#permanencia .otro").parent().next();b.attr("hidden",!0),b.addClass("otros");break;case"ayuda_transporte":var b=a("#set-desplazamiento .otro").parent().next();b.attr("hidden",!0),b.addClass("otros");break;case"beca":var b=a("#set-beca .otro").parent().next();b.attr("hidden",!0),b.addClass("otros");break;case"participacion":var b=a("#set-participacion .otro").parent().next();b.attr("hidden",!0),b.addClass("otros");break;case"condicion":var b=a("#set-salud .otro").parent().next();b.attr("hidden",!0),b.addClass("otros");break;case"apoyo_partic":var b=a("#set-apoyo .otro").parent().next();b.attr("hidden",!0),b.addClass("otros");break;case"discapacidad":var b=a("#set-certificado-discapacidad .otro").parent().next();b.attr("hidden",!0),b.addClass("otros");break;case"identidad_genero":var b=a("#set-identidad-gen .otro").parent().next();b.attr("hidden",!0),b.addClass("otros");break;case"orientacion_sexual":var b=a("#set-orientacion .otro").parent().next();b.attr("hidden",!0),b.addClass("otros")}}(c);break;case"checkbox":if(a(this).is(":checked")){let d=a(this).attr("name");a("input[name="+d+"]").attr("checked",!1)}case"tel":""!=a(this).val()&&a(this).val("")}}),a("#"+b).find("textarea").each(function(){""!=a(this).val()&&a(this).val("")}),a("#"+b).find("select").each(function(){""!=a(this).val()&&a(this).val(1)})}function U(){var b=[],a=[];return $("regimen_salud",a),Z("regimen_salud",a,b),$("data_sisben",a=[]),Y("observ_sisben",a),$("serv_adicionales",a),$("conclusion_jornada",a),Y("conclusion",a),$("json_detalle",a),Z("datos_salud_adicionales",a,b),$("serv_usuario",a=[]),Z("servicios_usados",a,b),a=[],b}function V(){var b=[],a=[];return $("percepcion_discapacidad",a),Y("desc_discap",a),Z("percepcion_disca",a,b),$("diagnosticos",a=[]),Z("diagnosticos",a,b),$("condicion_salud",a=[]),Y("rel_cond_salud",a),Z("condicion_salud",a,b),$("medicamentos",a=[]),Z("medicamentos",a,b),$("cambio_tratamiento",a=[]),Y("obs_cambio",a),Z("cambios_tratamiento",a,b),$("disca_por_municipio",a=[]),Y("doc_localizacion",a),Z("discapacidad_municipio",a,b),$("certificado_disca",a=[]),Y("certi_disca",a),Z("certificado_discapacidad",a,b),$("datos_invalidez",a=[]),Z("certificado_invalidez",a,b),$("cond_org_sist",a=[]),Z("condicion_organos",a,b),$("dif_permanente",a=[]),Z("dificultad_permanente",a,b),$("set-participacion",a=[]),Y("text_participacion",a),$("set-apoyo",a),Y("text_apoyo_partic",a),Z("participacion_estudiantil",a,b),$("asoc_disca",a=[]),Z("organizacion_disca",a,b),$("apoyo_recibido",a=[]),Z("apoyo_dicapacidad",a,b),a=[],b}function W(){for(var b={},j=a(".select-academics-data").map(function(){return a(this).attr("id")}).get(),h=a(".select-academics-data").map(function(){return a(this).next().next().attr("id")}).get(),e=0;e<h.length;e++)a("#"+h[e]).val(a("#"+j[e]+" option:selected").val());var f=[],c=[],d=[];$("dif_educ_media",d),$("dif_educ_superior",d),$("dif_educ_paralelo",d),b.key_input="dificultades",b.val_input=d,(d=[]).push(b),b={};var i=[],g=a(".ingresos_u").serializeArray();return $("jornada",g),$("p_ingreso",g),Z("datos_academicos_adicionales",g,i),$("div_tipo_institucion",c),$("div_tipo_institucion_superior",c),$("div_tipo_institucion_paralelo",c),b.key_input="otras_instituciones",b.val_input=c,(c=[]).push(b),b={},f.push(i),f.push(c),f.push(d),f}function X(){var a=[],b=[],c=[],d=[],e=[],f=[],g=[],h={},i={},j={},k={};return $("set-sostenimiento",g),$("otro_ingreso",g),Z("datos_economicos_adicionales",g,a),$("set-permanencia",a),$("set-beca",a),$("set-materiales",b),$("set-valor-materiales",b),a.push(b),$("set-desplazamiento",b=[]),$("set-valor-desplazamiento",b),a.push(b),$("row_madre_academic",c),$("row_padre_academic",c),$("row_otro_academic",c),$("row_madre_ocupacion",d),$("row_padre_ocupacion",d),$("row_otro_ocupacion",d),$("row_madre_laboral",e),$("row_padre_laboral",e),$("row_otro_laboral",e),Y("motivo_ingreso",f),Y("expecativas_carrera",f),Y("expectativas_graduarse",f),h.key_input="expectativas_laborales",h.val_input=f,j.key_input="ocupacion_padres",j.val_input=d,i.key_input="nivel_educ_padres",i.val_input=c,k.key_input="situa_laboral_padres",k.val_input=e,a.push(i),a.push(j),a.push(k),a.push(h),a}function Y(b,c){json_insert={},null!=a("#"+b).val()&&a("#"+b).val().length>=3&&(json_insert.key_input_text=a("#"+b).attr("id"),json_insert.val_input_text=a("#"+b).val(),c.push(json_insert),json_insert={})}function Z(a,b,c){(json_insert={}).key_input=a,json_insert.val_input=b,c.push(json_insert),json_insert={}}function $(b,c){a("#"+b).find("input").each(function(){json_object={};var d=a(this).attr("type");switch(d){case"text":a(this).hasClass("otros")||""==a(this).val()||(json_object.key_input_text=a(this).attr("id"),json_object.val_input_text=a(this).val(),c.push(json_object));break;case"number":if(a(this).hasClass("otros")||""==a(this).val())break;json_object.key_input_number=a(this).attr("id"),json_object.val_input_number=a(this).val(),c.push(json_object);break;case"date":if(a(this).hasClass("otros")||""==a(this).val())break;json_object.key_input_date=a(this).attr("id"),json_object.val_input_date=a(this).val(),c.push(json_object);break;case"radio":var b=_(a(this));""!==b.id&&(""!=b.id1?(json_object.key_input=a(this).attr("name"),json_object.val_input=a(this).val(),"text"==b.type&&(json_object.key_input_text=b.id,json_object.val_input_text=b.val,json_object.key_input_number=b.id1,json_object.val_input_number=b.val1),c.push(json_object)):(json_object.key_input=a(this).attr("name"),json_object.val_input=a(this).val(),"text"==b.type?(json_object.key_input_text=b.id,json_object.val_input_text=b.val):"number"==b.type&&(json_object.key_input_number=b.id,json_object.val_input_number=b.val),c.push(json_object)));break;case"checkbox":var b=_(a(this));""!==b.id&&(json_object.key_input=a(this).attr("id"),json_object.val_input="on","text"==b.type?(json_object.key_input_text=b.id,json_object.val_input_text=b.val):"number"==b.type&&(json_object.key_input_number=b.id,json_object.val_input_number=b.val),c.push(json_object));break;default:json_object.key_input=0,json_object.val_input=0}})}function _(b){var a={};if(!b.is(":checked"))return a.id="",a.val="",a;if(!b.hasClass("otro"))return a.id=b.attr("name"),a.val=b.val(),a;var d=b.parent().next().find("input"),c=b.parent().next().children("input:last");return a.id=d.attr("id"),a.val=d.val(),a.type=d.attr("type"),c.attr("id")!=a.id&&(a.id1=c.attr("id"),a.val1=c.val(),a.type1=c.attr("type")),a}function aa(b,c){a("#"+b).find("[name="+c+"]").on("click",function(){var c=a("#"+b+" .otro").parent().next();a(this).hasClass("otro")?(c.attr("hidden",!1),c.removeClass("otros")):(c.attr("hidden",!0),c.addClass("otros"))})}function ab(b,c){a("#"+b).find("[name="+c+"]").on("change",function(){var c=a("#"+b+" .otro").parent().next();a(this).hasClass("otro")&&a(this).prop("checked")?(c.attr("hidden",!1),c.removeClass("otros")):(c.attr("hidden",!0),c.addClass("otros"))})}function ac(b){a("."+b).each(function(){var c=a(this);c.data("oldVal",c.val()),c.bind("propertychange change input paste",function(a){c.data("oldVal")!=c.val()&&(c.data("oldVal",c.val()),"tabl_famiia"===b?m=!0:n=!0)}),c.bind("keypress",function(a){ad(a,c.attr("id"))})})}function ad(a,b){switch(b){case"codigo_estudiantil":case"num_doc_ini":case"celular_modal":case"tel_res_modal":case"tel_ini":case"tel_acudiente_modal":case"tel_cont_2":case"estrato_modal":case"hijos_modal":case"semestre_actual":case"anio_ingreso":case"puntaje_icfes_modal":af(a);break;case"nombre":case"apellido":ae(a)}}function ae(a){for(var b in key=a.keyCode||a.which,tecla=String.fromCharCode(key).toLowerCase(),letras=" \xe1\xe9\xed\xf3\xfaabcdefghijklmn\xf1opqrstuvwxyz",tecla_especial=!1,especiales=[8,37,39,46])if(key==especiales[b]){tecla_especial=!0;break}-1!=letras.indexOf(tecla)||tecla_especial||a.preventDefault()}function af(a){for(var b in key=a.keyCode||a.which,tecla=String.fromCharCode(key).toLowerCase(),letras=" 0123456789",tecla_especial=!1,especiales=[8,37,39])if(key==especiales[b]){tecla_especial=!0;break}-1!=letras.indexOf(tecla)||tecla_especial||a.preventDefault()}function ag(b){var c=!1;return a("."+b+"[required]").each(function(){var b=a(this);if("radio"==b.attr("type")){if(a('input:radio[name="'+b.attr("name")+'"]').is(":checked")){let d=a(this).prev();a(this).prev().hasClass("alert")&&d.attr("hidden",!0)}else c=!0,a(this).prev().attr("hidden",!1)}else if(""==b.val())c=!0,a(this).next().attr("hidden",!1);else{let e=a(this).next();a(this).next().hasClass("alert")&&e.attr("hidden",!0)}}),c}function ah(b){a("."+b+"[required]:visible").each(function(){let b=a(this).next();a(this).next().hasClass("alert")&&b.attr("hidden",!0)})}function ai(){var b=J(a("#table_familia"));$("set-vive",b);var c=JSON.stringify(b),e=a("#hijos_modal").val(),f=a("#estrato_modal").val();K(a("#num_doc_ini").val()),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step2",params:[r,f,e,c,d]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function aj(){var b=U();K(a("#num_doc_ini").val());var c=a("#EPS").val();a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_health_service",params:[b,c,r]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){isNaN(a)||swal("Registro completado exitosamente!","","success")},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function ak(){var b=U();K(a("#num_doc_ini").val());var c=a("#EPS").val();a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_health_service",params:[b,c,r,t]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){a&&swal("Actualizacion completada exitosamente!","","success")},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function al(){var b=a("#puntaje_icfes_modal").val(),c=a("#anio_ingreso").val(),d=a("#colegio").val();K(a("#num_doc_ini").val()),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step3",params:[r,b,c,d]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function am(){var b=a("#input_discapacidad").val();K(a("#num_doc_ini").val()),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step4",params:[r,b]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}a("#num_doc_ini").blur(function(){var b,c;a("#num_doc_ini").val().length>2&&(ah("step1"),K(a("#num_doc_ini").val()),a("#step-1 :input").prop("disabled",!1),null!=r?(R(a("#codigo_estudiantil").val()),b=r,c=q,a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_exist_user_extended",params:[b,c]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){w=JSON.parse(a)},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),w?(T("step-2"),T("step-3"),T("div_educ_media"),T("step-4"),T("step-5"),T("step-6"),D(),h=!0,K(a("#num_doc_ini").val(),1),function(c){var j=!0;for(var b in c)"json_detalle"==b&&(j=!1);for(var b in c)if(null!=c[b])switch(b){case"vive_con":let k="";if(-1==c[b].indexOf("Array")){let m=(k=JSON.parse(c[b])).find(a=>"vive"===a.key_input);null!=m&&M(m.key_input,m.val_input),a("#table_familia").find("tbody tr").remove();for(let h=0;h<k.length-1;h++){let p=k[h];F(p.nombre,p.rol,h)}}else a("#table_familia").find("tbody tr").remove();break;case"fecha_nac":var g=new Date(c[b]),q="",s="";s=1+g.getMonth()<10?"0"+(1+g.getMonth()):1+g.getMonth(),q=10>g.getDate()?"0"+g.getDate():g.getDate(),a("#fecha_nac_modal").val(g.getFullYear()+"-"+s+"-"+q),E(c[b]);break;case"json_detalle":var f=c[b];f=JSON.parse(f);for(let n=0;n<f.length;n++){let e=f[n];null!=e.key_input_text?a("#"+e.key_input_text).val(e.val_input_text):"sede"==e.key_input_number?(a("#select_sede").val(e.val_input_number),a("#select_sede").trigger("change")):"orientacion_s"==e.key_input_number?(a("#select-orientacion").val(e.val_input_number),a("#select-orientacion").trigger("change")):(a("#acompanamientos").val(e.val_input_number),a("#acompanamientos").trigger("change")),null!=e.key_input&&(N(e.key_input),Q(e.key_input)),null!=e.v_modal&&(j=!0)}break;case"actividades_ocio_deporte":var f=c[b];f=JSON.parse(f);for(let o=0;o<f.length;o++){let t=f[o];L(t.name,t.value)}break;case"id_economics_data":null!=(d=c[b])&&(i=!0,y=!0,O(r,"exist_academics_data"),O(r,"exist_health_data"),O(r,"exist_discapacity_data"));break;default:"estrato"==b||"puntaje_icfes"==b||"hijos"==b||"tel_res"==b||"celular"==b||"tel_acudiente"==b||"emailpilos"==b?a("#"+b+"_modal").val(c[b]):(a("#"+b).val(c[b]),a("#"+b).trigger("change"))}j||(swal({title:"",text:"Este usuario ha sido registrado con otro formulario",type:"info"}),C()),l=!1}(s)):(D(),a("#num_doc_ini").val(""),swal("Waarning","No existe relacion entre el numero de documento y el codigo del estudiante, intentalo nuevamente.","warning"))):swal({title:"Warning",text:"Usuario inexistente en la base de datos, \xbfEsta seguro de registrar este usuario?.",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!1},function(b){b?(swal({title:"Confirmado",text:"",type:"success",timer:1500}),a("#step-1 :input").prop("disabled",!1),D()):(swal({title:"Cancelado",text:"Ingresa nuevamente el documento del estudiante",type:"error",timer:1500}),a("#num_doc_ini").val(""))}))}),a(".step1").each(function(){var b=a(this);b.data("oldVal",b.val()),b.bind("propertychange change input paste",function(a){b.data("oldVal")!=b.val()&&(b.data("oldVal",b.val()),l=!0)}),b.bind("keypress",function(a){ad(a,b.attr("id"))})}),a(".step2").each(function(){var b=a(this);b.data("oldVal",b.val()),b.bind("propertychange change input paste",function(a){b.data("oldVal")!=b.val()&&(b.data("oldVal",b.val()),m=!0)}),b.bind("keypress",function(a){ad(a,b.attr("id"))})}),a(".step3").each(function(){var b=a(this);b.data("oldVal",b.val()),b.bind("propertychange change input paste",function(a){b.data("oldVal")!=b.val()&&(b.data("oldVal",b.val()),n=!0)}),b.bind("keypress",function(a){ad(a,b.attr("id"))})}),a(".step4").each(function(){var b=a(this);b.data("oldVal",b.val()),b.bind("propertychange change input paste",function(a){b.data("oldVal")!=b.val()&&(b.data("oldVal",b.val()),o=!0)})}),a(".step5").each(function(){var b=a(this);b.data("oldVal",b.val()),b.bind("propertychange change input paste",function(a){b.data("oldVal")!=b.val()&&(b.data("oldVal",b.val()),p=!0)})}),a(".step6").each(function(){var b=a(this);b.data("oldVal",b.val()),b.bind("propertychange change input paste",function(a){b.data("oldVal")!=b.val()&&(b.data("oldVal",b.val()),z=!0)})}),a('input[type="radio"]').on("change",function(){a(this).hasClass("step1")?l=!0:a(this).hasClass("step2")?m=!0:a(this).hasClass("step3")?n=!0:a(this).hasClass("step4")?o=!0:a(this).hasClass("step5")?p=!0:a(this).hasClass("step6")&&(z=!0)}),a("#codigo_estudiantil").each(function(){var b=a(this);b.bind("keypress",function(a){ad(a,b.attr("id"))})}),a('input[type="checkbox"]').on("change",function(){a(this).hasClass("step4")?o=!0:a(this).hasClass("step5")?p=!0:a(this).hasClass("step6")&&(z=!0)}),a("#emailpilos_modal").on("keyup",function(){/([A-Z0-9a-z_-][^@])+?@[^$#<>?]+?\.[\w]{2,4}/.test(this.value)?(a("#errorEPilos").attr("hidden",!0),a("#successEPilos").attr("hidden",!1),setTimeout(()=>{a("#successEPilos").attr("hidden",!0)},3e3)):(a("#errorEPilos").attr("hidden",!1),a("#successEPilos").attr("hidden",!0))}),a("#emailinstitucional").on("keyup",function(){/([A-Z0-9a-z_-][^@])+?@[^$#<>?]+?\.[\w]{2,4}/.test(this.value)?(a("#errorEInst").attr("hidden",!0),a("#successEInst").attr("hidden",!1),setTimeout(()=>{a("#successEInst").attr("hidden",!0)},3e3)):(a("#errorEInst").attr("hidden",!1),a("#successEInst").attr("hidden",!0))}),a("#smartwizard").on("leaveStep",function(av,aw,at,au,ax){var ay,L,O,F,G,H,S,T,C,z,D,U,Y,s,B,E,Z,_,aa,w,ab,ac,ad,ae,af,ah,aj,ak,an,ao,ap,aq,ar,as;if("forward"===au)switch(document.getElementById("modal_acomp").scrollIntoView({behavior:"auto"}),function(){a("#tipo_doc").val(a("#tipo_doc_ini option:selected").val());for(var d=a(".select-registro").map(function(){return a(this).attr("id")}).get(),c=a(".select-registro").map(function(){return a(this).next().next().attr("id")}).get(),b=0;b<c.length;b++)a("#"+c[b]).val(a("#"+d[b]+" option:selected").val())}(),at){case 0:if(L=!1,a(".step1[required]:visible").each(function(){if(""==a(this).val())L=!0,a(this).next().attr("hidden",!1);else{let b=a(this).next();a(this).next().hasClass("alert")&&b.attr("hidden",!0)}}),L)return swal("Oops!","Rellena todos los campos necesarios para poder avanzar","warning"),!1;g&&(O=a("#programa").val(),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_program",params:O}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){var b;u=b=JSON.parse(a).cod_univalle},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),F=a("#codigo_estudiantil").val(),G=a("#nombre").val(),H=a("#apellido").val(),S=a("#emailinstitucional").val(),T=""+F+"-"+u,C=G.charAt(0)+F+H.charAt(0),C=C.toUpperCase(),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_mdl_user",params:[T,G,H,S,C]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){q=a},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),g=!1),h?l&&(K(a("#num_doc_ini").val()),a("#num_doc_modal").val(a("#num_doc_ini").val()),(z=[]).push({name:"deportes",value:b.getArr()}),z.push({name:"actividades",value:c.getArr()}),z=JSON.stringify(z),D=a(".talentospilos_usuario").serializeArray(),U=a("#div_tipo_institucion ").find("[name=estamento]:checked").val(),D.push({name:"estamento",value:U}),D.push({name:"id_ciudad_nac",value:a("#id_ciudad_ini").val()}),Y=a("#programa").val(),s=[],$("otra_identidad",s),s.push({key_input_number:"orientacion_s",val_input_number:a("#select-orientacion").val()}),s.push({v_modal:!0}),$("otra_orientacion",s),$("div_contacto_2",s),$("otros_acomp",s),$("sede_div",s),s=JSON.stringify(s),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_data_ases",params:[D,z,Y,r,s]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){a&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),l=!1):(R(a("#codigo_estudiantil").val()),a("#num_doc_modal").val(a("#num_doc_ini").val()),(B=[]).push({name:"deportes",value:b.getArr()}),B.push({name:"actividades",value:c.getArr()}),B=JSON.stringify(B),E=a(".talentospilos_usuario").serializeArray(),Z=a("#div_tipo_institucion ").find("[name=estamento]:checked").val(),E.push({name:"estamento",value:Z}),E.push({name:"id_ciudad_nac",value:a("#id_ciudad_ini").val()}),_=J(a("#table_familia")),aa=a("#programa").val(),w=[],$("otra_identidad",w),w.push({key_input_number:"orientacion_s",val_input_number:a("#select-orientacion").val()}),w.push({v_modal:!0}),$("otra_orientacion",w),$("div_contacto_2",w),$("otros_acomp",w),$("sede_div",w),w=JSON.stringify(w),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data",params:[E,B,_,aa,q,w]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),h=!0,l=!1),i&&(K(a("#num_doc_ini").val()),P(r,"get_economics_data"),function(f){let e=Object.values(f);for(let d=2;d<e.length;d++){var b=JSON.parse(e[d]);if(null!=b){if(Array.isArray(b))for(let c=0;c<b.length;c++)void 0!==b[c].key_input?(M(b[c].key_input,b[c].val_input),0==b[c].val_input&&(Q(b[c].key_input),a("#"+b[c].key_input_text).val(b[c].val_input_text))):a("#"+b[c].key_input_text).val(b[c].val_input_text);else"beca"===b.key_input?(M(b.key_input,b.val_input),0==b.val_input&&(Q("beca"),a("#"+b.key_input_text).val(b.val_input_text),a("#"+b.key_input_number).val(b.val_input_number))):M("solvencia_econo",b)}}}(v));break;case 1:if(ag("step2"))return swal("Oops!","Rellena todos los campos necesarios para poder avanzar","warning"),!1;a("#table_ingresos").find("tbody").find("tr").remove(),i?m&&(ai(),ab=X(),ac=a("#estrato_modal").val(),K(a("#num_doc_ini").val()),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_economics_dt",params:[ab,ac,r,d]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){a&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),m=!1):(ad=X(),ae=a("#estrato_modal").val(),K(a("#num_doc_ini").val()),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_economics_data",params:[ad,ae,r]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){d=a},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),ai(),i=!0,m=!1),x&&(K(a("#num_doc_ini").val()),P(r,"get_academics_data"),function(f){for(let d in f)switch(d){case"id":e=f[d];break;case"otras_instituciones":let h=JSON.parse(f[d]);for(let g=0;g<h.length;g++)a("#"+h[g].key_input_text).val(h[g].val_input_text),null!=h[g].key_input&&M(h[g].key_input,h[g].val_input);break;case"dificultades":let j=JSON.parse(f[d]);for(let i=0;i<j.length;i++)a("#"+j[i].key_input_text).val(j[i].val_input_text);break;case"datos_academicos_adicionales":let c=JSON.parse(f[d]);a("#table_ingresos").find("tbody").find("tr").remove();for(let b=0;b<c.length;b++)null!=c[b].name&& -1!=c[b].name.indexOf("anio")&&I(b+1,c[b].value,c[b+1].value,c[b+2].value),a("#"+c[b].key_input_text).val(c[b].val_input_text),a("#"+c[b].key_input_date).val(c[b].val_input_date),null!=c[b].key_input&&M(c[b].key_input,c[b].val_input);setTimeout(()=>{A()},1e3);break;default:"observaciones"==d?a("#"+d+"_modal").val(f[d]):a("#"+d).val(f[d])}}(v),n=!1);break;case 2:if(ag("step3"))return swal("Oops!","Rellena todos los campos necesarios para poder avanzar","warning"),!1;x?n&&(al(),af=W(),K(a("#num_doc_ini").val()),ah=a("#programa").val(),aj=a("#titulo_1").val(),ak=a("#observaciones_modal").val(),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_academics_dt",params:[af,ah,aj,ak,r,e]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){a&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),n=!1):(al(),an=W(),K(a("#num_doc_ini").val()),ao=a("#programa").val(),ap=a("#titulo_1").val(),aq=a("#observaciones_modal").val(),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_academics_data",params:[an,ao,ap,aq,r]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),x=!0,n=!1),j&&(K(a("#num_doc_ini").val()),P(r,"get_discapacity_data"),function(d){for(let e in d){"id"==e&&(f=d[e]);let c=JSON.parse(d[e]);for(let b=0;b<c.length;b++)"on"===c[b].val_input?N(c[b].key_input):(M(c[b].key_input,c[b].val_input),0==c[b].val_input&&(Q(c[b].key_input),a("#"+c[b].key_input_text).val(c[b].val_input_text))),"doc_localizacion"!==c[b].key_input_text&&"certi_disca"!==c[b].key_input_text&&(a("#"+c[b].key_input_text).val(c[b].val_input_text),a("#"+c[b].key_input_date).val(c[b].val_input_date))}}(v));break;case 3:y?o&&(am(),o=!1):(am(),y=!0,o=!1);break;case 4:j?p&&(ar=V(),K(a("#num_doc_ini").val()),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_discapacity_dt",params:[ar,r,f]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){a&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),p=!1):(as=V(),K(a("#num_doc_ini").val()),a.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_disapacity_data",params:[as,r]}),url:"../managers/student_profile/studentprofile_api.php",success:function(a){},error:function(a){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),j=!0,p=!1),k&&(K(a("#num_doc_ini").val()),P(r,"get_health_data"),function(d){for(let e in d)switch(e){case"id":t=d[e];break;case"servicio_salud_vinculado":a("#EPS").val(d[e]);break;default:let c=JSON.parse(d[e]);for(let b=0;b<c.length;b++)"on"===c[b].val_input?N(c[b].key_input):M(c[b].key_input,c[b].val_input),a("#"+c[b].key_input_text).val(c[b].val_input_text),a("#"+c[b].key_input_number).val(c[b].val_input_number),a("#"+c[b].key_input_date).val(c[b].val_input_date)}}(v))}})})}}})