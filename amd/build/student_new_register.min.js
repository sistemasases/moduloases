/*
 * @package    block_ases
 * @copyright  ASES
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */ define(["jquery","block_ases/bootstrap","block_ases/tagging","block_ases/mustache","block_ases/sweetalert","block_ases/select2"],function(t,e,a,i,n,o){return!function(t,e,a,i){"use strict";function n(e,a){this.options=t.extend(!0,{},o,a),this.main=t(e),this.nav=this.main.children("ul"),this.steps=t("li > a",this.nav),this.container=this.main.children("div"),this.pages=this.container.children("div"),this.current_index=null,this.options.toolbarSettings.toolbarButtonPosition="right"===this.options.toolbarSettings.toolbarButtonPosition?"end":this.options.toolbarSettings.toolbarButtonPosition,this.options.toolbarSettings.toolbarButtonPosition="left"===this.options.toolbarSettings.toolbarButtonPosition?"start":this.options.toolbarSettings.toolbarButtonPosition,this.options.theme=null===this.options.theme||""===this.options.theme?"default":this.options.theme,this.init()}var o={selected:0,keyNavigation:0,autoAdjustHeight:!0,cycleSteps:!1,backButtonSupport:!0,useURLhash:!0,showStepURLhash:!0,lang:{next:"Next",previous:"Previous"},toolbarSettings:{toolbarPosition:"bottom",toolbarButtonPosition:"end",showNextButton:!0,showPreviousButton:!0,toolbarExtraButtons:[]},anchorSettings:{anchorClickable:!0,enableAllAnchors:!1,markDoneStep:!0,markAllPreviousStepsAsDone:!0,removeDoneStepOnNavigateBack:!1,enableAnchorOnDoneStep:!0},contentURL:null,contentCache:!0,ajaxSettings:{},disabledSteps:[],errorSteps:[],hiddenSteps:[],theme:"default",transitionEffect:"none",transitionSpeed:"400"};t.extend(n.prototype,{init:function(){this._setElements(),this._setToolbar(),this._setEvents();var a=this.options.selected;if(this.options.useURLhash){var i=e.location.hash;if(i&&i.length>0){var n=t("a[href*='"+i+"']",this.nav);if(n.length>0){var o=this.steps.index(n);a=o>=0?o:a}}}a>0&&this.options.anchorSettings.markDoneStep&&this.options.anchorSettings.markAllPreviousStepsAsDone&&this.steps.eq(a).parent("li").prevAll().addClass("done"),this._showStep(a)},_setElements:function(){this.main.addClass("sw-main sw-theme-"+this.options.theme),this.nav.addClass("nav nav-tabs step-anchor").children("li").addClass("nav-item").children("a").addClass("nav-link"),!1!==this.options.anchorSettings.enableAllAnchors&&!1!==this.options.anchorSettings.anchorClickable&&this.steps.parent("li").addClass("clickable"),this.container.addClass("sw-container tab-content"),this.pages.addClass("tab-pane step-content");var e=this;return this.options.disabledSteps&&this.options.disabledSteps.length>0&&t.each(this.options.disabledSteps,function(t,a){e.steps.eq(a).parent("li").addClass("disabled")}),this.options.errorSteps&&this.options.errorSteps.length>0&&t.each(this.options.errorSteps,function(t,a){e.steps.eq(a).parent("li").addClass("danger")}),this.options.hiddenSteps&&this.options.hiddenSteps.length>0&&t.each(this.options.hiddenSteps,function(t,a){e.steps.eq(a).parent("li").addClass("hidden")}),!0},_setToolbar:function(){if("none"===this.options.toolbarSettings.toolbarPosition)return!0;var e,a,i=!1!==this.options.toolbarSettings.showNextButton?t("<button></button>").text(this.options.lang.next).addClass("btn btn-secondary sw-btn-next").attr("type","button"):null,n=!1!==this.options.toolbarSettings.showPreviousButton?t("<button></button>").text(this.options.lang.previous).addClass("btn btn-secondary sw-btn-prev").attr("type","button"):null,o=t("<div></div>").addClass("btn-group mr-2 sw-btn-group").attr("role","group").append(n,i),s=null;switch(this.options.toolbarSettings.toolbarExtraButtons&&this.options.toolbarSettings.toolbarExtraButtons.length>0&&(s=t("<div></div>").addClass("btn-group mr-2 sw-btn-group-extra").attr("role","group"),t.each(this.options.toolbarSettings.toolbarExtraButtons,function(t,e){s.append(e.clone(!0))})),this.options.toolbarSettings.toolbarPosition){case"top":(e=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-top justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o),"start"===this.options.toolbarSettings.toolbarButtonPosition?e.prepend(s):e.append(s),this.container.before(e);break;case"bottom":(a=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o),"start"===this.options.toolbarSettings.toolbarButtonPosition?a.prepend(s):a.append(s),this.container.after(a);break;case"both":(e=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-top justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o),"start"===this.options.toolbarSettings.toolbarButtonPosition?e.prepend(s):e.append(s),this.container.before(e),(a=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o.clone(!0)),null!==s&&("start"===this.options.toolbarSettings.toolbarButtonPosition?a.prepend(s.clone(!0)):a.append(s.clone(!0))),this.container.after(a);break;default:(a=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o),this.options.toolbarSettings.toolbarButtonPosition,a.append(s),this.container.after(a)}return!0},_setEvents:function(){var i=this;return t(this.steps).on("click",function(t){if(t.preventDefault(),!1===i.options.anchorSettings.anchorClickable)return!0;var e=i.steps.index(this);if(!1===i.options.anchorSettings.enableAnchorOnDoneStep&&i.steps.eq(e).parent("li").hasClass("done"))return!0;e!==i.current_index&&(!1!==i.options.anchorSettings.enableAllAnchors&&!1!==i.options.anchorSettings.anchorClickable?i._showStep(e):i.steps.eq(e).parent("li").hasClass("done")&&i._showStep(e))}),t(".sw-btn-next",this.main).on("click",function(t){t.preventDefault(),i._showNext()}),t(".sw-btn-prev",this.main).on("click",function(t){t.preventDefault(),i._showPrevious()}),this.options.keyNavigation&&t(a).keyup(function(t){i._keyNav(t)}),this.options.backButtonSupport&&t(e).on("hashchange",function(a){if(!i.options.useURLhash)return!0;if(e.location.hash){var n=t("a[href*='"+e.location.hash+"']",i.nav);n&&n.length>0&&(a.preventDefault(),i._showStep(i.steps.index(n)))}}),!0},_showNext:function(){for(var t=this.current_index+1,e=t;e<this.steps.length;e++)if(!this.steps.eq(e).parent("li").hasClass("disabled")&&!this.steps.eq(e).parent("li").hasClass("hidden")){t=e;break}if(this.steps.length<=t){if(!this.options.cycleSteps)return!1;t=0}return this._showStep(t),!0},_showPrevious:function(){for(var t=this.current_index-1,e=t;e>=0;e--)if(!this.steps.eq(e).parent("li").hasClass("disabled")&&!this.steps.eq(e).parent("li").hasClass("hidden")){t=e;break}if(0>t){if(!this.options.cycleSteps)return!1;t=this.steps.length-1}return this._showStep(t),!0},_showStep:function(t){return!!this.steps.eq(t)&&t!=this.current_index&&!this.steps.eq(t).parent("li").hasClass("disabled")&&!this.steps.eq(t).parent("li").hasClass("hidden")&&(this._loadStepContent(t),!0)},_loadStepContent:function(e){var a=this,i=this.steps.eq(this.current_index),n="",o=this.steps.eq(e),s=o.data("content-url")&&o.data("content-url").length>0?o.data("content-url"):this.options.contentURL;if(null!==this.current_index&&this.current_index!==e&&(n=this.current_index<e?"forward":"backward"),null!==this.current_index&&!1===this._triggerEvent("leaveStep",[i,this.current_index,n]))return!1;if(!(s&&s.length>0)||o.data("has-content")&&this.options.contentCache)this._transitPage(e);else{var r=o.length>0?t(o.attr("href"),this.main):null,l=t.extend(!0,{},{url:s,type:"POST",data:{step_number:e},dataType:"text",beforeSend:function(){a._loader("show")},error:function(e,i,n){a._loader("hide"),t.error(n)},success:function(t){t&&t.length>0&&(o.data("has-content",!0),r.html(t)),a._loader("hide"),a._transitPage(e)}},this.options.ajaxSettings);t.ajax(l)}return!0},_transitPage:function(e){var a=this,i=this.steps.eq(this.current_index),n=i.length>0?t(i.attr("href"),this.main):null,o=this.steps.eq(e),s=o.length>0?t(o.attr("href"),this.main):null,r="";null!==this.current_index&&this.current_index!==e&&(r=this.current_index<e?"forward":"backward");var l="middle";return 0===e?l="first":e===this.steps.length-1&&(l="final"),this.options.transitionEffect=this.options.transitionEffect.toLowerCase(),this.pages.finish(),"slide"===this.options.transitionEffect?n&&n.length>0?n.slideUp("fast",this.options.transitionEasing,function(){s.slideDown(a.options.transitionSpeed,a.options.transitionEasing)}):s.slideDown(this.options.transitionSpeed,this.options.transitionEasing):"fade"===this.options.transitionEffect?n&&n.length>0?n.fadeOut("fast",this.options.transitionEasing,function(){s.fadeIn("fast",a.options.transitionEasing,function(){t(this).show()})}):s.fadeIn(this.options.transitionSpeed,this.options.transitionEasing,function(){t(this).show()}):(n&&n.length>0&&n.hide(),s.show()),this._setURLHash(o.attr("href")),this._setAnchor(e),this._setButtons(e),this._fixHeight(e),this.current_index=e,this._triggerEvent("showStep",[o,this.current_index,r,l]),!0},_setAnchor:function(t){return this.steps.eq(this.current_index).parent("li").removeClass("active"),!1!==this.options.anchorSettings.markDoneStep&&null!==this.current_index&&(this.steps.eq(this.current_index).parent("li").addClass("done"),!1!==this.options.anchorSettings.removeDoneStepOnNavigateBack&&this.steps.eq(t).parent("li").nextAll().removeClass("done")),this.steps.eq(t).parent("li").removeClass("done").addClass("active"),!0},_setButtons:function(e){return this.options.cycleSteps||(0>=e?t(".sw-btn-prev",this.main).addClass("disabled"):t(".sw-btn-prev",this.main).removeClass("disabled"),this.steps.length-1<=e?t(".sw-btn-next",this.main).addClass("disabled"):t(".sw-btn-next",this.main).removeClass("disabled")),!0},_keyNav:function(t){switch(t.which){case 37:this._showPrevious(),t.preventDefault();break;case 39:this._showNext(),t.preventDefault();break;default:return}},_fixHeight:function(e){if(this.options.autoAdjustHeight){var a=this.steps.eq(e).length>0?t(this.steps.eq(e).attr("href"),this.main):null;this.container.finish().animate({minHeight:a.outerHeight()},this.options.transitionSpeed,function(){})}return!0},_triggerEvent:function(e,a){var i=t.Event(e);return this.main.trigger(i,a),!i.isDefaultPrevented()&&i.result},_setURLHash:function(t){this.options.showStepURLhash&&e.location.hash!==t&&(e.location.hash=t)},_loader:function(t){switch(t){case"show":this.main.addClass("sw-loading");break;case"hide":this.main.removeClass("sw-loading");break;default:this.main.toggleClass("sw-loading")}},theme:function(t){if(this.options.theme===t)return!1;this.main.removeClass("sw-theme-"+this.options.theme),this.options.theme=t,this.main.addClass("sw-theme-"+this.options.theme),this._triggerEvent("themeChanged",[this.options.theme])},next:function(){this._showNext()},prev:function(){this._showPrevious()},reset:function(){if(!1===this._triggerEvent("beginReset"))return!1;this.container.stop(!0),this.pages.stop(!0),this.pages.hide(),this.current_index=null,this._setURLHash(this.steps.eq(this.options.selected).attr("href")),t(".sw-toolbar",this.main).remove(),this.steps.removeClass(),this.steps.parents("li").removeClass(),this.steps.data("has-content",!1),this.init(),this._triggerEvent("endReset")},stepState:function(e,a){e=t.isArray(e)?e:[e];var i=t.grep(this.steps,function(a,i){return -1!==t.inArray(i,e)});if(i&&i.length>0)switch(a){case"disable":t(i).parents("li").addClass("disabled");break;case"enable":t(i).parents("li").removeClass("disabled");break;case"hide":t(i).parents("li").addClass("hidden");break;case"show":t(i).parents("li").removeClass("hidden");break;case"error-on":t(i).parents("li").addClass("danger");break;case"error-off":t(i).parents("li").removeClass("danger")}}}),t.fn.smartWizard=function(e){var a,i=arguments;return void 0===e||"object"==typeof e?this.each(function(){t.data(this,"smartWizard")||t.data(this,"smartWizard",new n(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(a=t.data(this[0],"smartWizard"),"destroy"===e&&t.data(this,"smartWizard",null),a instanceof n&&"function"==typeof a[e]?a[e].apply(a,Array.prototype.slice.call(i,1)):this):void 0}}(t,window,document),{init:function(){t(document).ready(function(){var e,a,i,n,o,s,r,l,d,c,p,u,h,v,m,f="",b="",g="",y="",x="",$="",_=!1,k=!1,C=!1,w=!1;function S(){t(".select_modal").select2({width:"resolve",height:"resolve",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando.."}}})}function E(){X(t("#select_programa"),"get_programas_academicos")}function P(){f="",b="",g="",i="",n="",o="",y="",x="",$="",s=!1,r=!1,_=!1,l=!1,k=!1,d=!1,c=!1,C=!1,p=!1,u=!1,h=!1,v=!1,m=!1,w=!1,t("#step-1 :input").prop("disabled",!0),t("#codigo_estudiantil").prop("disabled",!1),t("#validar_codigo").prop("disabled",!1),t("#limpiar_form").prop("disabled",!1),t("#nombre").val(""),t("#apellido").val(""),t("#emailinstitucional").val(""),t("#emailpilos_modal").val(""),Z("step-1"),Z("step-2"),Z("step-3"),Z("div_educ_media"),Z("step-4"),Z("step-5"),Z("step-6"),t("#select_programa").empty(),E(),td("step1"),R("deportes",[]),R("actividades",[]),t("#table_familia").find("tbody tr").remove(),t("#table_ingresos").find("tbody tr").remove(),t("#smartwizard").smartWizard("reset")}function j(){s?t("#step-1 :input").prop("disabled",!1):(t("#nombre").prop("disabled",!0),t("#apellido").prop("disabled",!0),t("#emailinstitucional").prop("disabled",!0)),t("#edad").prop("disabled",!0)}function B(e){var a=new Date,i=new Date(e),n=a.getFullYear()-i.getFullYear(),o=a.getMonth()-i.getMonth();(o<0||0===o&&a.getDate()<i.getDate())&&n--,t("#edad").val(n)}function O(e,a,i){let n="";n+='<tr><td> <input id="nom'+i+'" class="input_fields_general_tab_modal tabl_famiia"  type="text"/></td>',n+='<td> <input id="rol'+i+'" class="input_fields_general_tab_modal tabl_famiia"  type="text" /></td>',n+='<td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',t("#table_familia").find("tbody").append(n),t("#nom"+i).val(e),t("#rol"+i).val(a),ts("tabl_famiia")}t("#step-1 :input").prop("disabled",!0),t("#codigo_estudiantil").prop("disabled",!1),t("#validar_codigo").prop("disabled",!1),t("#limpiar_form").prop("disabled",!1),t("#pruebas").on("click",function(){}),t("#mostrar").on("click",function(){X(t("#id_ciudad_ini"),"get_ciudades"),X(t("#acompanamientos"),"get_otros_acompa\xf1amientos"),X(t("#id_cond_excepcion"),"get_cond_excepcion"),X(t("#id_estado_civil"),"get_estados_civiles"),X(t("#sexo"),"get_sex_options"),X(t("#id_identidad_gen"),"get_generos"),X(t("#id_act_simultanea"),"get_act_simultaneas"),X(t("#id_etnia"),"get_etnias"),X(t("#tipo_doc"),"get_document_types"),X(t("#id_discapacidad"),"get_discapacities"),X(t("#id_pais"),"get_paises"),X(t("#barrio_res"),"get_barrios"),X(t("#id_ciudad_res"),"get_ciudades"),E(),X(t("#id_pais_res"),"get_paises"),X(t("#barrio_ini"),"get_barrios"),X(t("#tipo_doc_ini"),"get_document_types"),X(t("#select_sede"),"get_sedes"),tn("permanencia","solvencia_econo"),tn("set-desplazamiento","ayuda_transporte"),tn("set-certificado-discapacidad","discapacidad"),tn("set-apoyo","apoyo_partic"),tn("set-participacion","participacion"),tn("set-salud","condicion"),to("set-orientacion","orientacion_sexual"),to("set-identidad-gen","identidad_genero"),tn("set-beca","beca"),(e=new Tagging(t("#deportes_tag"),t("#tags_deportes"),1,3)).createTag(),(a=new Tagging(t("#tiempo_libre"),t("#tags_tiempo_libre"))).createTag(),S(),t("#modalExample").show(),document.body.style.overflowY="hidden"}),t(".closer").on("click",function(){t("#modalExample").hide(),document.body.style.overflowY="visible"}),t("#smartwizard").smartWizard({selected:0,theme:"dots",autoAdjustHeight:!0,showStepURLhash:!1,lang:{next:"Continuar y Guardar",previous:"Anterior"}}),t("#limpiar_form").on("click",function(){P()}),t("#validar_codigo").on("click",function(){var e=t("#codigo_estudiantil").val();td("step1");var a=t("#set-identidad-gen .otro").parent().next();a.attr("hidden",!0),a.addClass("otros");var a=t("#set-orientacion .otro").parent().next();a.attr("hidden",!0),a.addClass("otros"),""===e||" "===e?(t("#nombre").val(""),t("#apellido").val(""),t("#emailinstitucional").val(""),t("#step-1 :input").prop("disabled",!0),t("#codigo_estudiantil").prop("disabled",!1),t("#validar_codigo").prop("disabled",!1),t("#limpiar_form").prop("disabled",!1),E()):t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_user",params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(e){var a,i;a=JSON.parse(e),!1!=a?(t("#step-1 :input").prop("disabled",!0),t("#codigo_estudiantil").prop("disabled",!1),t("#validar_codigo").prop("disabled",!1),t("#limpiar_form").prop("disabled",!1),t("#tipo_doc_ini").prop("disabled",!1),t("#num_doc_ini").prop("disabled",!1),t("#select_sede").prop("disabled",!1),t("#select_programa").prop("disabled",!1),i=a,t("#nombre").val(i.firstname),t("#apellido").val(i.lastname),t("#emailinstitucional").val(i.email),j(),programs=i.username.slice(i.username.indexOf("-")+1),t("#select_programa").empty(),X(t("#select_programa"),"get_programas_academicos_est",programs),r=!1,s=!1):swal({title:"Warning",text:"Estudiante inexistente en la base de datos, \xbfEsta seguro de registrar este usuario?.",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!1},function(e){e?(swal({title:"Confirmado",text:"",type:"success",timer:1500}),s=!0,r=!1,Z("step-2"),Z("step-3"),Z("div_educ_media"),Z("step-4"),Z("step-5"),Z("step-6"),j()):(swal({title:"Cancelado",text:"Ingresa nuevamente el codigo del estudiante",type:"error",timer:1500}),t("#codigo_estudiantil").val(""))})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}),t("#fecha_nac_modal").blur(function(){var e;B(t("#fecha_nac_modal").val())}),t(document).on("click",".remove_fila",function(){u=!0,t(this).parent().parent().remove()}),t(document).on("click",".remove_fila_ing",function(){h=!0,A--,t(this).parent().parent().remove()}),t("#add_person_r").on("click",function(){var e;let a;u=!0,e=t("#table_familia"),a="",a+='<tr><td> <input  class="input_fields_general_tab_modal tabl_famiia"  type="text"/></td>',a+='<td> <input  class="input_fields_general_tab_modal tabl_famiia"  type="text" /></td>',a+='<td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',e.find("tbody").append(a),ts("tabl_famiia")}),t("#add_ingreso").on("click",function(){var e;let a;h=!0,A++,e=t("#table_ingresos"),a="",a+='<tr><td> <input id="anio_'+A+'" class="input_fields_general_tab_modal ingresos_u tabl_ing" name="anio_'+A+'"  type="text"/></td>',a+='<td> <select id="s_programa_'+A+'" class="custom-select select-academics-data select_modal tabl_ing"></select> <input  id="id_programa_'+A+'" name="id_programa_'+A+'" class="ingresos_u" type="number" hidden></td>',a+='<td><select id="motivo_I'+A+'" class="custom-select select-academics-data select_modal tabl_ing"> <option value="1">Bajos acad\xe9micos</option> <option value="2">Condici\xf3n de salud</option> <option value="3">Fallecimiento</option> <option value="4">Condici\xf3n econ\xf3mica</option> <option value="5">Condici\xf3n de programa acad\xe9mico</option> <option value="6">Cambio de instituci\xf3n educativa</option> <option value="7">Cambio de ciudad</option> <option value="8">Retiro voluntario</option> <option value="9">Prefiero no decirlo</option> </select> <input  id="motivo_'+A+'" name="motivo_'+A+'" class="ingresos_u" type="number" hidden> </td>',a+='<td> <button class="btn btn-danger remove_fila_ing" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',e.find("tbody").append(a),X(t("#s_programa_"+A),"get_programas_academicos"),S(),ts("tabl_ing")}),t(document).on("click","#guardar_info",function(){var e,a,i,n;c?w&&(e=G(),q(t("#num_doc_ini").val()),a=t("#EPS").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_health_service",params:[e,a,b,y]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal("Actualizacion completada exitosamente!","","success")},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),w=!1):(i=G(),q(t("#num_doc_ini").val()),n=t("#EPS").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_health_service",params:[i,n,b]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){isNaN(t)||swal("Registro completado exitosamente!","","success")},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),c=!0,w=!1)});var A=0;function z(e,a,i,n){let o="";o+='<tr><td> <input id="anio_'+e+'" class="input_fields_general_tab_modal ingresos_u tabl_ing" name="anio_'+e+'"  type="text"/></td>',o+='<td> <select id="s_programa_'+e+'" class="custom-select select-academics-data select_modal tabl_ing"></select> <input  id="id_programa_'+e+'" name="id_programa_'+e+'" class="ingresos_u" type="number" hidden></td>',o+='<td><select id="motivo_I'+e+'" class="custom-select select-academics-data select_modal tabl_ing"> <option value="1">Bajos acad\xe9micos</option> <option value="2">Condici\xf3n de salud</option> <option value="3">Fallecimiento</option> <option value="4">Condici\xf3n econ\xf3mica</option> <option value="5">Condici\xf3n de programa acad\xe9mico</option> <option value="6">Cambio de instituci\xf3n educativa</option> <option value="7">Cambio de ciudad</option> <option value="8">Retiro voluntario</option> <option value="9">Prefiero no decirlo</option> </select> <input id="motivo_'+e+'" name="motivo_'+e+'" class="ingresos_u" type="number" hidden> </td>',o+='<td> <button class="btn btn-danger remove_fila_ing" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',t("#table_ingresos").find("tbody").append(o),X(t("#s_programa_"+e),"get_programas_academicos"),t("#anio_"+e).val(a),setTimeout(()=>{t("#s_programa_"+e).val(i)},1e3),t("#motivo_I"+e).val(n),A=e,ts("tabl_ing")}function T(e){for(var a=[],i=e.find("tbody input").map(function(){return t(this).val()}).get(),n=0;n<i.length;n+=2){var o={nombre:i[n],rol:i[n+1]};a.push(o)}return a}function q(e,a){t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_ases_user_id",params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e,i,n=JSON.parse(t);null==a?(e=n.id,b=e):1==a&&(i=n,g=i)},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function D(t){b=t}function V(t){g=t}function R(i,n){"deportes"==i?e.displayTags(n,t("#tags_deportes")):a.displayTags(n,t("#tags_tiempo_libre"))}function N(e,a){t("input:radio[name="+e+"]").filter("[value="+a+"]").attr("checked",!0)}function I(e){t("input[name="+e+"]").attr("checked",!0)}function L(e,a){t.ajax({async:!1,type:"POST",data:JSON.stringify({function:a,params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e=JSON.parse(t);"exist_academics_data"==a?k=e:"exist_health_data"==a?c=e:"exist_discapacity_data"==a&&(d=e)},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function U(e,a){t.ajax({async:!1,type:"POST",data:JSON.stringify({function:a,params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e;e=JSON.parse(t),$=e},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function H(t){$=t}function W(e){switch(e){case"solvencia_econo":var a=t("#permanencia .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"ayuda_transporte":var a=t("#set-desplazamiento .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"beca":var a=t("#set-beca .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"participacion":var a=t("#set-participacion .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"condicion":var a=t("#set-salud .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"apoyo_partic":var a=t("#set-apoyo .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"discapacidad":var a=t("#set-certificado-discapacidad .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"identidad_genero":var a=t("#set-identidad-gen .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"orientacion_sexual":var a=t("#set-orientacion .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros")}}function F(e){t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_user",params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e;e=JSON.parse(t).id,f=e},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function M(t){f=t}function Y(t){x=t}function X(e,a,i){var n="1";null!=i&&(n=i),t.ajax({type:"POST",data:JSON.stringify({function:a,params:n}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var a=JSON.parse(t);for(var i in a)e.append("<option value='"+a[i].id+"'>"+Object.values(a[i])[1]+"</option>")},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function Z(e){t("#"+e).find("input").each(function(){var e=t(this).attr("type");switch(e){case"text":case"number":case"date":""!=t(this).val()&&t(this).val("");break;case"radio":let a=t(this).attr("name");t(this).is(":checked")&&t(this).attr("checked",!1),t(this).hasClass("otro")&&function e(a){switch(a){case"solvencia_econo":var i=t("#permanencia .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"ayuda_transporte":var i=t("#set-desplazamiento .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"beca":var i=t("#set-beca .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"participacion":var i=t("#set-participacion .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"condicion":var i=t("#set-salud .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"apoyo_partic":var i=t("#set-apoyo .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"discapacidad":var i=t("#set-certificado-discapacidad .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"identidad_genero":var i=t("#set-identidad-gen .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"orientacion_sexual":var i=t("#set-orientacion .otro").parent().next();i.attr("hidden",!0),i.addClass("otros")}}(a);break;case"checkbox":if(t(this).is(":checked")){let i=t(this).attr("name");t("input[name="+i+"]").attr("checked",!1)}case"tel":""!=t(this).val()&&t(this).val("")}}),t("#"+e).find("textarea").each(function(){""!=t(this).val()&&t(this).val("")}),t("#"+e).find("select").each(function(){""!=t(this).val()&&t(this).val(1)})}function G(){var t=[],e=[];return ta("regimen_salud",e),te("regimen_salud",e,t),ta("data_sisben",e=[]),tt("observ_sisben",e),ta("serv_adicionales",e),ta("conclusion_jornada",e),tt("conclusion",e),ta("json_detalle",e),te("datos_salud_adicionales",e,t),ta("serv_usuario",e=[]),te("servicios_usados",e,t),e=[],t}function J(){var t=[],e=[];return ta("percepcion_discapacidad",e),tt("desc_discap",e),te("percepcion_disca",e,t),ta("diagnosticos",e=[]),te("diagnosticos",e,t),ta("condicion_salud",e=[]),tt("rel_cond_salud",e),te("condicion_salud",e,t),ta("medicamentos",e=[]),te("medicamentos",e,t),ta("cambio_tratamiento",e=[]),tt("obs_cambio",e),te("cambios_tratamiento",e,t),ta("disca_por_municipio",e=[]),tt("doc_localizacion",e),te("discapacidad_municipio",e,t),ta("certificado_disca",e=[]),tt("certi_disca",e),te("certificado_discapacidad",e,t),ta("datos_invalidez",e=[]),te("certificado_invalidez",e,t),ta("cond_org_sist",e=[]),te("condicion_organos",e,t),ta("dif_permanente",e=[]),te("dificultad_permanente",e,t),ta("set-participacion",e=[]),tt("text_participacion",e),ta("set-apoyo",e),tt("text_apoyo_partic",e),te("participacion_estudiantil",e,t),ta("asoc_disca",e=[]),te("organizacion_disca",e,t),ta("apoyo_recibido",e=[]),te("apoyo_dicapacidad",e,t),e=[],t}function K(){for(var e={},a=t(".select-academics-data").map(function(){return t(this).attr("id")}).get(),i=t(".select-academics-data").map(function(){return t(this).next().next().attr("id")}).get(),n=0;n<i.length;n++)t("#"+i[n]).val(t("#"+a[n]+" option:selected").val());var o=[],s=[],r=[];ta("dif_educ_media",r),ta("dif_educ_superior",r),ta("dif_educ_paralelo",r),e.key_input="dificultades",e.val_input=r,(r=[]).push(e),e={};var l=[],d=t(".ingresos_u").serializeArray();return ta("jornada",d),ta("p_ingreso",d),te("datos_academicos_adicionales",d,l),ta("div_tipo_institucion",s),ta("div_tipo_institucion_superior",s),ta("div_tipo_institucion_paralelo",s),e.key_input="otras_instituciones",e.val_input=s,(s=[]).push(e),e={},o.push(l),o.push(s),o.push(r),o}function Q(){var t=[],e=[],a=[],i=[],n=[],o=[],s=[],r={},l={},d={},c={};return ta("set-sostenimiento",s),ta("otro_ingreso",s),te("datos_economicos_adicionales",s,t),ta("set-permanencia",t),ta("set-beca",t),ta("set-materiales",e),ta("set-valor-materiales",e),t.push(e),ta("set-desplazamiento",e=[]),ta("set-valor-desplazamiento",e),t.push(e),ta("row_madre_academic",a),ta("row_padre_academic",a),ta("row_otro_academic",a),ta("row_madre_ocupacion",i),ta("row_padre_ocupacion",i),ta("row_otro_ocupacion",i),ta("row_madre_laboral",n),ta("row_padre_laboral",n),ta("row_otro_laboral",n),tt("motivo_ingreso",o),tt("expecativas_carrera",o),tt("expectativas_graduarse",o),r.key_input="expectativas_laborales",r.val_input=o,d.key_input="ocupacion_padres",d.val_input=i,l.key_input="nivel_educ_padres",l.val_input=a,c.key_input="situa_laboral_padres",c.val_input=n,t.push(l),t.push(d),t.push(c),t.push(r),t}function tt(e,a){json_insert={},null!=t("#"+e).val()&&t("#"+e).val().length>=3&&(json_insert.key_input_text=t("#"+e).attr("id"),json_insert.val_input_text=t("#"+e).val(),a.push(json_insert),json_insert={})}function te(t,e,a){(json_insert={}).key_input=t,json_insert.val_input=e,a.push(json_insert),json_insert={}}function ta(e,a){t("#"+e).find("input").each(function(){json_object={};var e=t(this).attr("type");switch(e){case"text":t(this).hasClass("otros")||""==t(this).val()||(json_object.key_input_text=t(this).attr("id"),json_object.val_input_text=t(this).val(),a.push(json_object));break;case"number":if(t(this).hasClass("otros")||""==t(this).val())break;json_object.key_input_number=t(this).attr("id"),json_object.val_input_number=t(this).val(),a.push(json_object);break;case"date":if(t(this).hasClass("otros")||""==t(this).val())break;json_object.key_input_date=t(this).attr("id"),json_object.val_input_date=t(this).val(),a.push(json_object);break;case"radio":var i=ti(t(this));""!==i.id&&(""!=i.id1?(json_object.key_input=t(this).attr("name"),json_object.val_input=t(this).val(),"text"==i.type&&(json_object.key_input_text=i.id,json_object.val_input_text=i.val,json_object.key_input_number=i.id1,json_object.val_input_number=i.val1),a.push(json_object)):(json_object.key_input=t(this).attr("name"),json_object.val_input=t(this).val(),"text"==i.type?(json_object.key_input_text=i.id,json_object.val_input_text=i.val):"number"==i.type&&(json_object.key_input_number=i.id,json_object.val_input_number=i.val),a.push(json_object)));break;case"checkbox":var i=ti(t(this));""!==i.id&&(json_object.key_input=t(this).attr("id"),json_object.val_input="on","text"==i.type?(json_object.key_input_text=i.id,json_object.val_input_text=i.val):"number"==i.type&&(json_object.key_input_number=i.id,json_object.val_input_number=i.val),a.push(json_object));break;default:json_object.key_input=0,json_object.val_input=0}})}function ti(t){var e={};if(!t.is(":checked"))return e.id="",e.val="",e;if(!t.hasClass("otro"))return e.id=t.attr("name"),e.val=t.val(),e;var a=t.parent().next().find("input"),i=t.parent().next().children("input:last");return e.id=a.attr("id"),e.val=a.val(),e.type=a.attr("type"),i.attr("id")!=e.id&&(e.id1=i.attr("id"),e.val1=i.val(),e.type1=i.attr("type")),e}function tn(e,a){t("#"+e).find("[name="+a+"]").on("click",function(){var a=t("#"+e+" .otro").parent().next();t(this).hasClass("otro")?(a.attr("hidden",!1),a.removeClass("otros")):(a.attr("hidden",!0),a.addClass("otros"))})}function to(e,a){t("#"+e).find("[name="+a+"]").on("change",function(){var a=t("#"+e+" .otro").parent().next();t(this).hasClass("otro")&&t(this).prop("checked")?(a.attr("hidden",!1),a.removeClass("otros")):(a.attr("hidden",!0),a.addClass("otros"))})}function ts(e){t("."+e).each(function(){var a=t(this);a.data("oldVal",a.val()),a.bind("propertychange change input paste",function(t){a.data("oldVal")!=a.val()&&(a.data("oldVal",a.val()),"tabl_famiia"===e?u=!0:h=!0)}),a.bind("keypress",function(t){tr(t,a.attr("id"))})})}function tr(t,e){switch(e){case"codigo_estudiantil":case"num_doc_ini":case"celular_modal":case"tel_res_modal":case"tel_ini":case"tel_acudiente_modal":case"tel_cont_2":case"estrato_modal":case"hijos_modal":case"semestre_actual":case"anio_ingreso":case"puntaje_icfes_modal":(function t(e){for(var a in tecla=String.fromCharCode(key=e.keyCode||e.which).toLowerCase(),letras=" 0123456789",tecla_especial=!1,especiales=[8,37,39])if(key==especiales[a]){tecla_especial=!0;break}-1!=letras.indexOf(tecla)||tecla_especial||e.preventDefault()})(t);break;case"nombre":case"apellido":(function t(e){for(var a in tecla=String.fromCharCode(key=e.keyCode||e.which).toLowerCase(),letras=" \xe1\xe9\xed\xf3\xfaabcdefghijklmn\xf1opqrstuvwxyz",tecla_especial=!1,especiales=[8,37,39,46])if(key==especiales[a]){tecla_especial=!0;break}-1!=letras.indexOf(tecla)||tecla_especial||e.preventDefault()})(t)}}t("#num_doc_ini").blur(function(){var e,a;t("#num_doc_ini").val().length>2&&(td("step1"),q(t("#num_doc_ini").val()),t("#step-1 :input").prop("disabled",!1),null!=b?(F(t("#codigo_estudiantil").val()),e=b,a=f,t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_exist_user_extended",params:[e,a]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){_=JSON.parse(t)},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),_?(Z("step-2"),Z("step-3"),Z("div_educ_media"),Z("step-4"),Z("step-5"),Z("step-6"),j(),r=!0,q(t("#num_doc_ini").val(),1),function e(a){var n=!0;for(var o in a)"json_detalle"==o&&(n=!1);for(var o in a)if(null!=a[o])switch(o){case"vive_con":let s="";if(-1==a[o].indexOf("Array")){let r=(s=JSON.parse(a[o])).find(t=>"vive"===t.key_input);null!=r&&N(r.key_input,r.val_input),t("#table_familia").find("tbody tr").remove();for(let d=0;d<s.length-1;d++){let c=s[d];O(c.nombre,c.rol,d)}}else t("#table_familia").find("tbody tr").remove();break;case"fecha_nac":var u=new Date(a[o]),h="",v="";v=1+u.getMonth()<10?"0"+(1+u.getMonth()):1+u.getMonth(),h=10>u.getDate()?"0"+u.getDate():u.getDate(),t("#fecha_nac_modal").val(u.getFullYear()+"-"+v+"-"+h),B(a[o]);break;case"json_detalle":var m=a[o];m=JSON.parse(m);for(let f=0;f<m.length;f++){let g=m[f];null!=g.key_input_text?t("#"+g.key_input_text).val(g.val_input_text):"sede"==g.key_input_number?(t("#select_sede").val(g.val_input_number),t("#select_sede").trigger("change")):"orientacion_s"==g.key_input_number?(t("#select-orientacion").val(g.val_input_number),t("#select-orientacion").trigger("change")):(t("#acompanamientos").val(g.val_input_number),t("#acompanamientos").trigger("change")),null!=g.key_input&&(I(g.key_input),W(g.key_input)),null!=g.v_modal&&(n=!0)}break;case"actividades_ocio_deporte":var m=a[o];m=JSON.parse(m);for(let y=0;y<m.length;y++){let x=m[y];R(x.name,x.value)}break;case"id_economics_data":null!=(i=a[o])&&(l=!0,C=!0,L(b,"exist_academics_data"),L(b,"exist_health_data"),L(b,"exist_discapacity_data"));break;default:"estrato"==o||"puntaje_icfes"==o||"hijos"==o||"tel_res"==o||"celular"==o||"tel_acudiente"==o||"emailpilos"==o?t("#"+o+"_modal").val(a[o]):(t("#"+o).val(a[o]),t("#"+o).trigger("change"))}n||(swal({title:"",text:"Este usuario ha sido registrado con otro formulario",type:"info"}),P()),p=!1}(g)):(j(),t("#num_doc_ini").val(""),swal("Waarning","No existe relacion entre el numero de documento y el codigo del estudiante, intentalo nuevamente.","warning"))):swal({title:"Warning",text:"Usuario inexistente en la base de datos, \xbfEsta seguro de registrar este usuario?.",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!1},function(e){e?(swal({title:"Confirmado",text:"",type:"success",timer:1500}),t("#step-1 :input").prop("disabled",!1),j()):(swal({title:"Cancelado",text:"Ingresa nuevamente el documento del estudiante",type:"error",timer:1500}),t("#num_doc_ini").val(""))}))});function tl(e){var a=!1;return t("."+e+"[required]").each(function(){var e=t(this);if("radio"==e.attr("type")){if(t('input:radio[name="'+e.attr("name")+'"]').is(":checked")){let i=t(this).prev();t(this).prev().hasClass("alert")&&i.attr("hidden",!0)}else{a=!0;t(this).prev().attr("hidden",!1)}}else if(""==e.val()){a=!0;t(this).next().attr("hidden",!1)}else{let n=t(this).next();t(this).next().hasClass("alert")&&n.attr("hidden",!0)}}),a}function td(e){t("."+e+"[required]:visible").each(function(){let e=t(this).next();t(this).next().hasClass("alert")&&e.attr("hidden",!0)})}function tc(){var e=T(t("#table_familia"));ta("set-vive",e);var a=JSON.stringify(e),n=t("#hijos_modal").val(),o=t("#estrato_modal").val();q(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step2",params:[b,o,n,a,i]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function tp(){var e=t("#puntaje_icfes_modal").val(),a=t("#anio_ingreso").val(),i=t("#colegio").val();q(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step3",params:[b,e,a,i]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function tu(){var e=t("#input_discapacidad").val();q(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step4",params:[b,e]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}t(".step1").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),p=!0)}),e.bind("keypress",function(t){tr(t,e.attr("id"))})}),t(".step2").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),u=!0)}),e.bind("keypress",function(t){tr(t,e.attr("id"))})}),t(".step3").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),h=!0)}),e.bind("keypress",function(t){tr(t,e.attr("id"))})}),t(".step4").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),v=!0)})}),t(".step5").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),m=!0)})}),t(".step6").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),w=!0)})}),t('input[type="radio"]').on("change",function(){t(this).hasClass("step1")?p=!0:t(this).hasClass("step2")?u=!0:t(this).hasClass("step3")?h=!0:t(this).hasClass("step4")?v=!0:t(this).hasClass("step5")?m=!0:t(this).hasClass("step6")&&(w=!0)}),t("#codigo_estudiantil").each(function(){var e=t(this);e.bind("keypress",function(t){tr(t,e.attr("id"))})}),t('input[type="checkbox"]').on("change",function(){t(this).hasClass("step4")?v=!0:t(this).hasClass("step5")?m=!0:t(this).hasClass("step6")&&(w=!0)}),t("#emailpilos_modal").on("keyup",function(){/([A-Z0-9a-z_-][^@])+?@[^$#<>?]+?\.[\w]{2,4}/.test(this.value)?(t("#errorEPilos").attr("hidden",!0),t("#successEPilos").attr("hidden",!1),setTimeout(()=>{t("#successEPilos").attr("hidden",!0)},3e3)):(t("#errorEPilos").attr("hidden",!1),t("#successEPilos").attr("hidden",!0))}),t("#emailinstitucional").on("keyup",function(){/([A-Z0-9a-z_-][^@])+?@[^$#<>?]+?\.[\w]{2,4}/.test(this.value)?(t("#errorEInst").attr("hidden",!0),t("#successEInst").attr("hidden",!1),setTimeout(()=>{t("#successEInst").attr("hidden",!0)},3e3)):(t("#errorEInst").attr("hidden",!1),t("#successEInst").attr("hidden",!0))}),t("#smartwizard").on("leaveStep",function(g,_,w,E,P){var j,B,O,A,D,V,R,L,H,M,Y,X,Z,G,tt,te,ti,tn,to,ts,tr,td,t8,th,tv,tm,tf,tb,tg,ty,tx,t$,t_;if("forward"===E)switch(document.getElementById("modal_acomp").scrollIntoView({behavior:"auto"}),function e(){t("#tipo_doc").val(t("#tipo_doc_ini option:selected").val());for(var a=t(".select-registro").map(function(){return t(this).attr("id")}).get(),i=t(".select-registro").map(function(){return t(this).next().next().attr("id")}).get(),n=0;n<i.length;n++)t("#"+i[n]).val(t("#"+a[n]+" option:selected").val())}(),w){case 0:if(B=!1,t(".step1[required]:visible").each(function(){if(""==t(this).val()){B=!0;t(this).next().attr("hidden",!1)}else{let e=t(this).next();t(this).next().hasClass("alert")&&e.attr("hidden",!0)}}),B)return swal("Oops!","Rellena todos los campos necesarios para poder avanzar","warning"),!1;if(s){j=t("#programa").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_program",params:j}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e;e=JSON.parse(t).cod_univalle,x=e},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),O=t("#codigo_estudiantil").val(),A=t("#nombre").val(),D=t("#apellido").val(),V=t("#emailinstitucional").val(),R=""+O+"-"+x,L=(L=A.charAt(0)+O+D.charAt(0)).toUpperCase(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_mdl_user",params:[R,A,D,V,L]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){f=t},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),s=!1}r?p&&(q(t("#num_doc_ini").val()),t("#num_doc_modal").val(t("#num_doc_ini").val()),(H=[]).push({name:"deportes",value:e.getArr()}),H.push({name:"actividades",value:a.getArr()}),H=JSON.stringify(H),M=t(".talentospilos_usuario").serializeArray(),Y=t("#div_tipo_institucion ").find("[name=estamento]:checked").val(),M.push({name:"estamento",value:Y}),M.push({name:"id_ciudad_nac",value:t("#id_ciudad_ini").val()}),X=t("#programa").val(),ta("otra_identidad",Z=[]),Z.push({key_input_number:"orientacion_s",val_input_number:t("#select-orientacion").val()}),Z.push({v_modal:!0}),ta("otra_orientacion",Z),ta("div_contacto_2",Z),ta("otros_acomp",Z),ta("sede_div",Z),Z=JSON.stringify(Z),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_data_ases",params:[M,H,X,b,Z]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),p=!1):(F(t("#codigo_estudiantil").val()),t("#num_doc_modal").val(t("#num_doc_ini").val()),(G=[]).push({name:"deportes",value:e.getArr()}),G.push({name:"actividades",value:a.getArr()}),G=JSON.stringify(G),tt=t(".talentospilos_usuario").serializeArray(),te=t("#div_tipo_institucion ").find("[name=estamento]:checked").val(),tt.push({name:"estamento",value:te}),tt.push({name:"id_ciudad_nac",value:t("#id_ciudad_ini").val()}),ti=T(t("#table_familia")),tn=t("#programa").val(),ta("otra_identidad",to=[]),to.push({key_input_number:"orientacion_s",val_input_number:t("#select-orientacion").val()}),to.push({v_modal:!0}),ta("otra_orientacion",to),ta("div_contacto_2",to),ta("otros_acomp",to),ta("sede_div",to),to=JSON.stringify(to),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data",params:[tt,G,ti,tn,f,to]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),r=!0,p=!1),l&&(q(t("#num_doc_ini").val()),U(b,"get_economics_data"),function e(a){let i=Object.values(a);for(let n=2;n<i.length;n++){var o=JSON.parse(i[n]);if(null!=o){if(Array.isArray(o))for(let s=0;s<o.length;s++)void 0!==o[s].key_input?(N(o[s].key_input,o[s].val_input),0==o[s].val_input&&(W(o[s].key_input),t("#"+o[s].key_input_text).val(o[s].val_input_text))):t("#"+o[s].key_input_text).val(o[s].val_input_text);else"beca"===o.key_input?(N(o.key_input,o.val_input),0==o.val_input&&(W("beca"),t("#"+o.key_input_text).val(o.val_input_text),t("#"+o.key_input_number).val(o.val_input_number))):N("solvencia_econo",o)}}}($));break;case 1:if(tl("step2"))return swal("Oops!","Rellena todos los campos necesarios para poder avanzar","warning"),!1;t("#table_ingresos").find("tbody").find("tr").remove(),l?u&&(tc(),ts=Q(),tr=t("#estrato_modal").val(),q(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_economics_dt",params:[ts,tr,b,i]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),u=!1):(td=Q(),t8=t("#estrato_modal").val(),q(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_economics_data",params:[td,t8,b]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){i=t},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),tc(),l=!0,u=!1),k&&(q(t("#num_doc_ini").val()),U(b,"get_academics_data"),function e(a){for(let i in a)switch(i){case"id":n=a[i];break;case"otras_instituciones":let o=JSON.parse(a[i]);for(let s=0;s<o.length;s++)t("#"+o[s].key_input_text).val(o[s].val_input_text),null!=o[s].key_input&&N(o[s].key_input,o[s].val_input);break;case"dificultades":let r=JSON.parse(a[i]);for(let l=0;l<r.length;l++)t("#"+r[l].key_input_text).val(r[l].val_input_text);break;case"datos_academicos_adicionales":let d=JSON.parse(a[i]);t("#table_ingresos").find("tbody").find("tr").remove();for(let c=0;c<d.length;c++)null!=d[c].name&&-1!=d[c].name.indexOf("anio")&&z(c+1,d[c].value,d[c+1].value,d[c+2].value),t("#"+d[c].key_input_text).val(d[c].val_input_text),t("#"+d[c].key_input_date).val(d[c].val_input_date),null!=d[c].key_input&&N(d[c].key_input,d[c].val_input);setTimeout(()=>{S()},1e3);break;default:"observaciones"==i?t("#"+i+"_modal").val(a[i]):t("#"+i).val(a[i])}}($),h=!1);break;case 2:if(tl("step3"))return swal("Oops!","Rellena todos los campos necesarios para poder avanzar","warning"),!1;k?h&&(tp(),th=K(),q(t("#num_doc_ini").val()),tv=t("#programa").val(),tm=t("#titulo_1").val(),tf=t("#observaciones_modal").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_academics_dt",params:[th,tv,tm,tf,b,n]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),h=!1):(tp(),tb=K(),q(t("#num_doc_ini").val()),tg=t("#programa").val(),ty=t("#titulo_1").val(),tx=t("#observaciones_modal").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_academics_data",params:[tb,tg,ty,tx,b]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),k=!0,h=!1),d&&(q(t("#num_doc_ini").val()),U(b,"get_discapacity_data"),function e(a){for(let i in a){"id"==i&&(o=a[i]);let n=JSON.parse(a[i]);for(let s=0;s<n.length;s++)"on"===n[s].val_input?I(n[s].key_input):(N(n[s].key_input,n[s].val_input),0==n[s].val_input&&(W(n[s].key_input),t("#"+n[s].key_input_text).val(n[s].val_input_text))),"doc_localizacion"!==n[s].key_input_text&&"certi_disca"!==n[s].key_input_text&&(t("#"+n[s].key_input_text).val(n[s].val_input_text),t("#"+n[s].key_input_date).val(n[s].val_input_date))}}($));break;case 3:C?v&&(tu(),v=!1):(tu(),C=!0,v=!1);break;case 4:d?m&&(t$=J(),q(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_discapacity_dt",params:[t$,b,o]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),m=!1):(t_=J(),q(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_disapacity_data",params:[t_,b]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),d=!0,m=!1),c&&(q(t("#num_doc_ini").val()),U(b,"get_health_data"),function e(a){for(let i in a)switch(i){case"id":y=a[i];break;case"servicio_salud_vinculado":t("#EPS").val(a[i]);break;default:let n=JSON.parse(a[i]);for(let o=0;o<n.length;o++)"on"===n[o].val_input?I(n[o].key_input):N(n[o].key_input,n[o].val_input),t("#"+n[o].key_input_text).val(n[o].val_input_text),t("#"+n[o].key_input_number).val(n[o].val_input_number),t("#"+n[o].key_input_date).val(n[o].val_input_date)}}($))}})})}}});