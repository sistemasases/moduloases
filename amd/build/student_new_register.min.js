define(["jquery","block_ases/bootstrap","block_ases/tagging","block_ases/mustache","block_ases/sweetalert","block_ases/select2"],function(t,e,a,i,n,o){return!function(t,e,a,i){"use strict";function n(e,a){this.options=t.extend(!0,{},o,a),this.main=t(e),this.nav=this.main.children("ul"),this.steps=t("li > a",this.nav),this.container=this.main.children("div"),this.pages=this.container.children("div"),this.current_index=null,this.options.toolbarSettings.toolbarButtonPosition="right"===this.options.toolbarSettings.toolbarButtonPosition?"end":this.options.toolbarSettings.toolbarButtonPosition,this.options.toolbarSettings.toolbarButtonPosition="left"===this.options.toolbarSettings.toolbarButtonPosition?"start":this.options.toolbarSettings.toolbarButtonPosition,this.options.theme=null===this.options.theme||""===this.options.theme?"default":this.options.theme,this.init()}var o={selected:0,keyNavigation:0,autoAdjustHeight:!0,cycleSteps:!1,backButtonSupport:!0,useURLhash:!0,showStepURLhash:!0,lang:{next:"Next",previous:"Previous"},toolbarSettings:{toolbarPosition:"bottom",toolbarButtonPosition:"end",showNextButton:!0,showPreviousButton:!0,toolbarExtraButtons:[]},anchorSettings:{anchorClickable:!0,enableAllAnchors:!1,markDoneStep:!0,markAllPreviousStepsAsDone:!0,removeDoneStepOnNavigateBack:!1,enableAnchorOnDoneStep:!0},contentURL:null,contentCache:!0,ajaxSettings:{},disabledSteps:[],errorSteps:[],hiddenSteps:[],theme:"default",transitionEffect:"none",transitionSpeed:"400"};t.extend(n.prototype,{init:function(){this._setElements(),this._setToolbar(),this._setEvents();var a=this.options.selected;if(this.options.useURLhash){var i=e.location.hash;if(i&&i.length>0){var n=t("a[href*='"+i+"']",this.nav);if(n.length>0){var o=this.steps.index(n);a=o>=0?o:a}}}a>0&&this.options.anchorSettings.markDoneStep&&this.options.anchorSettings.markAllPreviousStepsAsDone&&this.steps.eq(a).parent("li").prevAll().addClass("done"),this._showStep(a)},_setElements:function(){this.main.addClass("sw-main sw-theme-"+this.options.theme),this.nav.addClass("nav nav-tabs step-anchor").children("li").addClass("nav-item").children("a").addClass("nav-link"),!1!==this.options.anchorSettings.enableAllAnchors&&!1!==this.options.anchorSettings.anchorClickable&&this.steps.parent("li").addClass("clickable"),this.container.addClass("sw-container tab-content"),this.pages.addClass("tab-pane step-content");var e=this;return this.options.disabledSteps&&this.options.disabledSteps.length>0&&t.each(this.options.disabledSteps,function(t,a){e.steps.eq(a).parent("li").addClass("disabled")}),this.options.errorSteps&&this.options.errorSteps.length>0&&t.each(this.options.errorSteps,function(t,a){e.steps.eq(a).parent("li").addClass("danger")}),this.options.hiddenSteps&&this.options.hiddenSteps.length>0&&t.each(this.options.hiddenSteps,function(t,a){e.steps.eq(a).parent("li").addClass("hidden")}),!0},_setToolbar:function(){if("none"===this.options.toolbarSettings.toolbarPosition)return!0;var e,a,i=!1!==this.options.toolbarSettings.showNextButton?t("<button></button>").text(this.options.lang.next).addClass("btn btn-secondary sw-btn-next").attr("type","button"):null,n=!1!==this.options.toolbarSettings.showPreviousButton?t("<button></button>").text(this.options.lang.previous).addClass("btn btn-secondary sw-btn-prev").attr("type","button"):null,o=t("<div></div>").addClass("btn-group mr-2 sw-btn-group").attr("role","group").append(n,i),s=null;switch(this.options.toolbarSettings.toolbarExtraButtons&&this.options.toolbarSettings.toolbarExtraButtons.length>0&&(s=t("<div></div>").addClass("btn-group mr-2 sw-btn-group-extra").attr("role","group"),t.each(this.options.toolbarSettings.toolbarExtraButtons,function(t,e){s.append(e.clone(!0))})),this.options.toolbarSettings.toolbarPosition){case"top":(e=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-top justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o),"start"===this.options.toolbarSettings.toolbarButtonPosition?e.prepend(s):e.append(s),this.container.before(e);break;case"bottom":(a=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o),"start"===this.options.toolbarSettings.toolbarButtonPosition?a.prepend(s):a.append(s),this.container.after(a);break;case"both":(e=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-top justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o),"start"===this.options.toolbarSettings.toolbarButtonPosition?e.prepend(s):e.append(s),this.container.before(e),(a=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o.clone(!0)),null!==s&&("start"===this.options.toolbarSettings.toolbarButtonPosition?a.prepend(s.clone(!0)):a.append(s.clone(!0))),this.container.after(a);break;default:(a=t("<div></div>").addClass("btn-toolbar sw-toolbar sw-toolbar-bottom justify-content-"+this.options.toolbarSettings.toolbarButtonPosition)).append(o),this.options.toolbarSettings.toolbarButtonPosition,a.append(s),this.container.after(a)}return!0},_setEvents:function(){var i=this;return t(this.steps).on("click",function(t){if(t.preventDefault(),!1===i.options.anchorSettings.anchorClickable)return!0;var e=i.steps.index(this);if(!1===i.options.anchorSettings.enableAnchorOnDoneStep&&i.steps.eq(e).parent("li").hasClass("done"))return!0;e!==i.current_index&&(!1!==i.options.anchorSettings.enableAllAnchors&&!1!==i.options.anchorSettings.anchorClickable?i._showStep(e):i.steps.eq(e).parent("li").hasClass("done")&&i._showStep(e))}),t(".sw-btn-next",this.main).on("click",function(t){t.preventDefault(),i._showNext()}),t(".sw-btn-prev",this.main).on("click",function(t){t.preventDefault(),i._showPrevious()}),this.options.keyNavigation&&t(a).keyup(function(t){i._keyNav(t)}),this.options.backButtonSupport&&t(e).on("hashchange",function(a){if(!i.options.useURLhash)return!0;if(e.location.hash){var n=t("a[href*='"+e.location.hash+"']",i.nav);n&&n.length>0&&(a.preventDefault(),i._showStep(i.steps.index(n)))}}),!0},_showNext:function(){for(var t=this.current_index+1,e=t;e<this.steps.length;e++)if(!this.steps.eq(e).parent("li").hasClass("disabled")&&!this.steps.eq(e).parent("li").hasClass("hidden")){t=e;break}if(this.steps.length<=t){if(!this.options.cycleSteps)return!1;t=0}return this._showStep(t),!0},_showPrevious:function(){for(var t=this.current_index-1,e=t;e>=0;e--)if(!this.steps.eq(e).parent("li").hasClass("disabled")&&!this.steps.eq(e).parent("li").hasClass("hidden")){t=e;break}if(0>t){if(!this.options.cycleSteps)return!1;t=this.steps.length-1}return this._showStep(t),!0},_showStep:function(t){return!!this.steps.eq(t)&&t!=this.current_index&&!this.steps.eq(t).parent("li").hasClass("disabled")&&!this.steps.eq(t).parent("li").hasClass("hidden")&&(this._loadStepContent(t),!0)},_loadStepContent:function(e){var a=this,i=this.steps.eq(this.current_index),n="",o=this.steps.eq(e),s=o.data("content-url")&&o.data("content-url").length>0?o.data("content-url"):this.options.contentURL;if(null!==this.current_index&&this.current_index!==e&&(n=this.current_index<e?"forward":"backward"),null!==this.current_index&&!1===this._triggerEvent("leaveStep",[i,this.current_index,n]))return!1;if(!(s&&s.length>0)||o.data("has-content")&&this.options.contentCache)this._transitPage(e);else{var r=o.length>0?t(o.attr("href"),this.main):null,l=t.extend(!0,{},{url:s,type:"POST",data:{step_number:e},dataType:"text",beforeSend:function(){a._loader("show")},error:function(e,i,n){a._loader("hide"),t.error(n)},success:function(t){t&&t.length>0&&(o.data("has-content",!0),r.html(t)),a._loader("hide"),a._transitPage(e)}},this.options.ajaxSettings);t.ajax(l)}return!0},_transitPage:function(e){var a=this,i=this.steps.eq(this.current_index),n=i.length>0?t(i.attr("href"),this.main):null,o=this.steps.eq(e),s=o.length>0?t(o.attr("href"),this.main):null,r="";null!==this.current_index&&this.current_index!==e&&(r=this.current_index<e?"forward":"backward");var l="middle";return 0===e?l="first":e===this.steps.length-1&&(l="final"),this.options.transitionEffect=this.options.transitionEffect.toLowerCase(),this.pages.finish(),"slide"===this.options.transitionEffect?n&&n.length>0?n.slideUp("fast",this.options.transitionEasing,function(){s.slideDown(a.options.transitionSpeed,a.options.transitionEasing)}):s.slideDown(this.options.transitionSpeed,this.options.transitionEasing):"fade"===this.options.transitionEffect?n&&n.length>0?n.fadeOut("fast",this.options.transitionEasing,function(){s.fadeIn("fast",a.options.transitionEasing,function(){t(this).show()})}):s.fadeIn(this.options.transitionSpeed,this.options.transitionEasing,function(){t(this).show()}):(n&&n.length>0&&n.hide(),s.show()),this._setURLHash(o.attr("href")),this._setAnchor(e),this._setButtons(e),this._fixHeight(e),this.current_index=e,this._triggerEvent("showStep",[o,this.current_index,r,l]),!0},_setAnchor:function(t){return this.steps.eq(this.current_index).parent("li").removeClass("active"),!1!==this.options.anchorSettings.markDoneStep&&null!==this.current_index&&(this.steps.eq(this.current_index).parent("li").addClass("done"),!1!==this.options.anchorSettings.removeDoneStepOnNavigateBack&&this.steps.eq(t).parent("li").nextAll().removeClass("done")),this.steps.eq(t).parent("li").removeClass("done").addClass("active"),!0},_setButtons:function(e){return this.options.cycleSteps||(0>=e?t(".sw-btn-prev",this.main).addClass("disabled"):t(".sw-btn-prev",this.main).removeClass("disabled"),this.steps.length-1<=e?t(".sw-btn-next",this.main).addClass("disabled"):t(".sw-btn-next",this.main).removeClass("disabled")),!0},_keyNav:function(t){switch(t.which){case 37:this._showPrevious(),t.preventDefault();break;case 39:this._showNext(),t.preventDefault();break;default:return}},_fixHeight:function(e){if(this.options.autoAdjustHeight){var a=this.steps.eq(e).length>0?t(this.steps.eq(e).attr("href"),this.main):null;this.container.finish().animate({minHeight:a.outerHeight()},this.options.transitionSpeed,function(){})}return!0},_triggerEvent:function(e,a){var i=t.Event(e);return this.main.trigger(i,a),!i.isDefaultPrevented()&&i.result},_setURLHash:function(t){this.options.showStepURLhash&&e.location.hash!==t&&(e.location.hash=t)},_loader:function(t){switch(t){case"show":this.main.addClass("sw-loading");break;case"hide":this.main.removeClass("sw-loading");break;default:this.main.toggleClass("sw-loading")}},theme:function(t){if(this.options.theme===t)return!1;this.main.removeClass("sw-theme-"+this.options.theme),this.options.theme=t,this.main.addClass("sw-theme-"+this.options.theme),this._triggerEvent("themeChanged",[this.options.theme])},next:function(){this._showNext()},prev:function(){this._showPrevious()},reset:function(){if(!1===this._triggerEvent("beginReset"))return!1;this.container.stop(!0),this.pages.stop(!0),this.pages.hide(),this.current_index=null,this._setURLHash(this.steps.eq(this.options.selected).attr("href")),t(".sw-toolbar",this.main).remove(),this.steps.removeClass(),this.steps.parents("li").removeClass(),this.steps.data("has-content",!1),this.init(),this._triggerEvent("endReset")},stepState:function(e,a){e=t.isArray(e)?e:[e];var i=t.grep(this.steps,function(a,i){return -1!==t.inArray(i,e)});if(i&&i.length>0)switch(a){case"disable":t(i).parents("li").addClass("disabled");break;case"enable":t(i).parents("li").removeClass("disabled");break;case"hide":t(i).parents("li").addClass("hidden");break;case"show":t(i).parents("li").removeClass("hidden");break;case"error-on":t(i).parents("li").addClass("danger");break;case"error-off":t(i).parents("li").removeClass("danger")}}}),t.fn.smartWizard=function(e){var a,i=arguments;return void 0===e||"object"==typeof e?this.each(function(){t.data(this,"smartWizard")||t.data(this,"smartWizard",new n(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(a=t.data(this[0],"smartWizard"),"destroy"===e&&t.data(this,"smartWizard",null),a instanceof n&&"function"==typeof a[e]?a[e].apply(a,Array.prototype.slice.call(i,1)):this):void 0}}(t,window,document),{init:function(){t(document).ready(function(){var e,a,i,n,o,s,r,l,d,c,p,u,h,v,m,f,b,g="",y="",$="",x="",_="",k="",C=!1,w=!1,S=!1,E=!1;function P(){t(".select_modal").select2({width:"resolve",height:"resolve",language:{noResults:function(){return"No hay resultado"},searching:function(){return"Buscando.."}}})}function j(){G(t("#select_programa"),"get_programas_academicos")}function B(){g="",y="",$="",i="",n="",o="",x="",_="",k="",s=!1,r=!1,C=!1,l=!1,w=!1,d=!1,c=!1,S=!1,p=!1,u=!1,h=!1,v=!1,m=!1,E=!1,f=!1,b=!1,t("#step-1 :input").prop("disabled",!0),t("#codigo_estudiantil").prop("disabled",!1),t("#validar_codigo").prop("disabled",!1),t("#limpiar_form").prop("disabled",!1),t("#nombre").val(""),t("#apellido").val(""),t("#emailinstitucional").val(""),t("#emailpilos_modal").val(""),J("step-1"),J("step-2"),J("step-3"),J("div_educ_media"),J("step-4"),J("step-5"),J("step-6"),t("#select_programa").empty(),j(),tp("step1"),I("deportes",[]),I("actividades",[]),t("#table_familia").find("tbody tr").remove(),t("#table_ingresos").find("tbody tr").remove(),t("#smartwizard").smartWizard("reset")}function O(){s?t("#step-1 :input").prop("disabled",!1):(t("#nombre").prop("disabled",!0),t("#apellido").prop("disabled",!0),t("#emailinstitucional").prop("disabled",!0)),t("#edad").prop("disabled",!0)}function A(e){var a=new Date,i=new Date(e),n=a.getFullYear()-i.getFullYear(),o=a.getMonth()-i.getMonth();(o<0||0===o&&a.getDate()<i.getDate())&&n--,t("#edad").val(n)}function z(e,a,i){let n="";n+='<tr><td> <input id="nom'+i+'" class="input_fields_general_tab_modal tabl_famiia"  type="text"/></td>',n+='<td> <input id="rol'+i+'" class="input_fields_general_tab_modal tabl_famiia"  type="text" /></td>',n+='<td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',t("#table_familia").find("tbody").append(n),t("#nom"+i).val(e),t("#rol"+i).val(a),tl("tabl_famiia")}t("#step-1 :input").prop("disabled",!0),t("#codigo_estudiantil").prop("disabled",!1),t("#validar_codigo").prop("disabled",!1),t("#limpiar_form").prop("disabled",!1),t("#pruebas").on("click",function(){}),t("#mostrar").on("click",function(){G(t("#id_ciudad_ini"),"get_ciudades"),G(t("#acompanamientos"),"get_otros_acompa\xf1amientos"),G(t("#id_cond_excepcion"),"get_cond_excepcion"),G(t("#id_estado_civil"),"get_estados_civiles"),G(t("#sexo"),"get_sex_options"),G(t("#id_identidad_gen"),"get_generos"),G(t("#id_act_simultanea"),"get_act_simultaneas"),G(t("#id_etnia"),"get_etnias"),G(t("#tipo_doc"),"get_document_types"),G(t("#id_discapacidad"),"get_discapacities"),G(t("#id_pais"),"get_paises"),G(t("#barrio_res"),"get_barrios"),G(t("#id_ciudad_res"),"get_ciudades"),j(),G(t("#id_pais_res"),"get_paises"),G(t("#barrio_ini"),"get_barrios"),G(t("#tipo_doc_ini"),"get_document_types"),G(t("#select_sede"),"get_sedes"),ts("permanencia","solvencia_econo"),ts("set-desplazamiento","ayuda_transporte"),ts("set-certificado-discapacidad","discapacidad"),ts("set-apoyo","apoyo_partic"),ts("set-participacion","participacion"),ts("set-salud","condicion"),tr("set-orientacion","orientacion_sexual"),tr("set-identidad-gen","identidad_genero"),ts("set-beca","beca"),(e=new Tagging(t("#deportes_tag"),t("#tags_deportes"),1,3)).createTag(),(a=new Tagging(t("#tiempo_libre"),t("#tags_tiempo_libre"))).createTag(),P(),t("#modalExample").show(),document.body.style.overflowY="hidden",document.body.style.overflowX="hidden"}),t(".closer").on("click",function(){t("#modalExample").hide(),B(),document.body.style.overflowY="visible"}),t("#smartwizard").smartWizard({selected:0,theme:"dots",autoAdjustHeight:!0,showStepURLhash:!1,lang:{next:"Continuar y Guardar",previous:"Anterior"}}),t("#limpiar_form").on("click",function(){B()}),t("#validar_codigo").on("click",function(){var e=t("#codigo_estudiantil").val();tp("step1");var a=t("#set-identidad-gen .otro").parent().next();a.attr("hidden",!0),a.addClass("otros");var a=t("#set-orientacion .otro").parent().next();a.attr("hidden",!0),a.addClass("otros"),""===e||" "===e?(t("#nombre").val(""),t("#apellido").val(""),t("#emailinstitucional").val(""),t("#step-1 :input").prop("disabled",!0),t("#codigo_estudiantil").prop("disabled",!1),t("#validar_codigo").prop("disabled",!1),t("#limpiar_form").prop("disabled",!1),j()):t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_user",params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(e){var a,i;a=JSON.parse(e),!1!=a?(t("#step-1 :input").prop("disabled",!0),t("#codigo_estudiantil").prop("disabled",!1),t("#validar_codigo").prop("disabled",!1),t("#limpiar_form").prop("disabled",!1),t("#tipo_doc_ini").prop("disabled",!1),t("#num_doc_ini").prop("disabled",!1),t("#select_sede").prop("disabled",!1),t("#select_programa").prop("disabled",!1),i=a,t("#nombre").val(i.firstname),t("#apellido").val(i.lastname),t("#emailinstitucional").val(i.email),O(),programs=i.username.slice(i.username.indexOf("-")+1),t("#select_programa").empty(),G(t("#select_programa"),"get_programas_academicos_est",programs),r=!1,s=!1):swal({title:"Warning",text:"Estudiante inexistente en la base de datos, \xbfEsta seguro de registrar este usuario?.",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!1},function(e){e?(swal({title:"Confirmado",text:"",type:"success",timer:1500}),s=!0,r=!1,J("step-2"),J("step-3"),J("div_educ_media"),J("step-4"),J("step-5"),J("step-6"),O()):(swal({title:"Cancelado",text:"Ingresa nuevamente el codigo del estudiante",type:"error",timer:1500}),t("#codigo_estudiantil").val(""))})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}),t("#fecha_nac_modal").blur(function(){var e=t("#fecha_nac_modal").val();A(e)}),t(document).on("click",".remove_fila",function(){u=!0,b=!0,t(this).parent().parent().remove()}),t(document).on("click",".remove_fila_ing",function(){h=!0,b=!0,T--,t(this).parent().parent().remove()}),t("#add_person_r").on("click",function(){var e;let a;u=!0,b=!0,e=t("#table_familia"),a="",a+='<tr><td> <input  class="input_fields_general_tab_modal tabl_famiia"  type="text"/></td>',a+='<td> <input  class="input_fields_general_tab_modal tabl_famiia"  type="text" /></td>',a+='<td> <button class="btn btn-danger remove_fila" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',e.find("tbody").append(a),tl("tabl_famiia")}),t("#add_ingreso").on("click",function(){var e;let a;h=!0,b=!0,T++,e=t("#table_ingresos"),a="",a+='<tr><td> <input id="anio_'+T+'" class="input_fields_general_tab_modal ingresos_u tabl_ing" name="anio_'+T+'"  type="text"/></td>',a+='<td> <select id="s_programa_'+T+'" class="custom-select select-academics-data select_modal tabl_ing"></select> <input  id="id_programa_'+T+'" name="id_programa_'+T+'" class="ingresos_u" type="number" hidden></td>',a+='<td><select id="motivo_I'+T+'" class="custom-select select-academics-data select_modal tabl_ing"> <option value="1">Bajos acad\xe9micos</option> <option value="2">Condici\xf3n de salud</option> <option value="3">Fallecimiento</option> <option value="4">Condici\xf3n econ\xf3mica</option> <option value="5">Condici\xf3n de programa acad\xe9mico</option> <option value="6">Cambio de instituci\xf3n educativa</option> <option value="7">Cambio de ciudad</option> <option value="8">Retiro voluntario</option> <option value="9">Prefiero no decirlo</option> </select> <input  id="motivo_'+T+'" name="motivo_'+T+'" class="ingresos_u" type="number" hidden> </td>',a+='<td> <button class="btn btn-danger remove_fila_ing" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',e.find("tbody").append(a),G(t("#s_programa_"+T),"get_programas_academicos"),P(),tl("tabl_ing")}),t(document).on("click","#guardar_info",function(){var e,a,i,n;c?E?(e=K(),V(t("#num_doc_ini").val()),a=t("#EPS").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_health_service",params:[e,a,y,x]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal("Actualizacion completada exitosamente!","","success")},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),E=!1):b&&(swal("Actualizaci\xf3n completada Exitosamente","","success"),b=!1):(i=K(),V(t("#num_doc_ini").val()),n=t("#EPS").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_health_service",params:[i,n,y]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){isNaN(t)||swal("Registro completado exitosamente!","","success")},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),c=!0,E=!1)});var T=0;function q(e,a,i,n){let o="";o+='<tr><td> <input id="anio_'+e+'" class="input_fields_general_tab_modal ingresos_u tabl_ing" name="anio_'+e+'"  type="text"/></td>',o+='<td> <select id="s_programa_'+e+'" class="custom-select select-academics-data select_modal tabl_ing"></select> <input  id="id_programa_'+e+'" name="id_programa_'+e+'" class="ingresos_u" type="number" hidden></td>',o+='<td><select id="motivo_I'+e+'" class="custom-select select-academics-data select_modal tabl_ing"> <option value="1">Bajos acad\xe9micos</option> <option value="2">Condici\xf3n de salud</option> <option value="3">Fallecimiento</option> <option value="4">Condici\xf3n econ\xf3mica</option> <option value="5">Condici\xf3n de programa acad\xe9mico</option> <option value="6">Cambio de instituci\xf3n educativa</option> <option value="7">Cambio de ciudad</option> <option value="8">Retiro voluntario</option> <option value="9">Prefiero no decirlo</option> </select> <input id="motivo_'+e+'" name="motivo_'+e+'" class="ingresos_u" type="number" hidden> </td>',o+='<td> <button class="btn btn-danger remove_fila_ing" type="button" title="Eliminar persona" name="btn_delete_person" style="visibility:visible;"> X </button></td></tr>',t("#table_ingresos").find("tbody").append(o),G(t("#s_programa_"+e),"get_programas_academicos"),t("#anio_"+e).val(a),setTimeout(()=>{t("#s_programa_"+e).val(i)},1e3),t("#motivo_I"+e).val(n),T=e,tl("tabl_ing")}function D(e){for(var a=[],i=e.find("tbody input").map(function(){return t(this).val()}).get(),n=0;n<i.length;n+=2){var o={nombre:i[n],rol:i[n+1]};a.push(o)}return a}function V(e,a){t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_ases_user_id",params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e,i,n=JSON.parse(t);null==a?(e=n.id,y=e):1==a&&(i=n,$=i)},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function R(t){y=t}function N(t){$=t}function I(i,n){"deportes"==i?e.displayTags(n,t("#tags_deportes")):a.displayTags(n,t("#tags_tiempo_libre"))}function L(e,a){t("input:radio[name="+e+"]").filter("[value="+a+"]").attr("checked",!0)}function U(e){t("input[name="+e+"]").attr("checked",!0)}function H(e,a){t.ajax({async:!1,type:"POST",data:JSON.stringify({function:a,params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e=JSON.parse(t);"exist_academics_data"==a?w=e:"exist_health_data"==a?c=e:"exist_discapacity_data"==a&&(d=e)},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function W(e,a){t.ajax({async:!1,type:"POST",data:JSON.stringify({function:a,params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e;e=JSON.parse(t),k=e},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function F(t){k=t}function M(e){switch(e){case"solvencia_econo":var a=t("#permanencia .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"ayuda_transporte":var a=t("#set-desplazamiento .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"beca":var a=t("#set-beca .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"participacion":var a=t("#set-participacion .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"condicion":var a=t("#set-salud .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"apoyo_partic":var a=t("#set-apoyo .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"discapacidad":var a=t("#set-certificado-discapacidad .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"identidad_genero":var a=t("#set-identidad-gen .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros");break;case"orientacion_sexual":var a=t("#set-orientacion .otro").parent().next();a.attr("hidden",!1),a.removeClass("otros")}}function X(e){t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_user",params:e}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e;e=JSON.parse(t).id,g=e},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function Y(t){g=t}function Z(t){_=t}function G(e,a,i){var n="1";null!=i&&(n=i),t.ajax({type:"POST",data:JSON.stringify({function:a,params:n}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var a=JSON.parse(t);for(var i in a)e.append("<option value='"+a[i].id+"'>"+Object.values(a[i])[1]+"</option>")},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function J(e){t("#"+e).find("input").each(function(){var e=t(this).attr("type");switch(e){case"text":case"number":case"date":""!=t(this).val()&&t(this).val("");break;case"radio":let a=t(this).attr("name");t(this).is(":checked")&&t(this).attr("checked",!1),t(this).hasClass("otro")&&function e(a){switch(a){case"solvencia_econo":var i=t("#permanencia .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"ayuda_transporte":var i=t("#set-desplazamiento .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"beca":var i=t("#set-beca .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"participacion":var i=t("#set-participacion .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"condicion":var i=t("#set-salud .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"apoyo_partic":var i=t("#set-apoyo .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"discapacidad":var i=t("#set-certificado-discapacidad .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"identidad_genero":var i=t("#set-identidad-gen .otro").parent().next();i.attr("hidden",!0),i.addClass("otros");break;case"orientacion_sexual":var i=t("#set-orientacion .otro").parent().next();i.attr("hidden",!0),i.addClass("otros")}}(a);break;case"checkbox":if(t(this).is(":checked")){let i=t(this).attr("name");t("input[name="+i+"]").attr("checked",!1)}case"tel":""!=t(this).val()&&t(this).val("")}}),t("#"+e).find("textarea").each(function(){""!=t(this).val()&&t(this).val("")}),t("#"+e).find("select").each(function(){""!=t(this).val()&&t(this).val(1)})}function K(){var t=[],e=[];return tn("regimen_salud",e),ti("regimen_salud",e,t),tn("data_sisben",e=[]),ta("observ_sisben",e),tn("serv_adicionales",e),tn("conclusion_jornada",e),ta("conclusion",e),tn("json_detalle",e),ti("datos_salud_adicionales",e,t),tn("serv_usuario",e=[]),ti("servicios_usados",e,t),e=[],t}function Q(){var t=[],e=[];return tn("percepcion_discapacidad",e),ta("desc_discap",e),ti("percepcion_disca",e,t),tn("diagnosticos",e=[]),ti("diagnosticos",e,t),tn("condicion_salud",e=[]),ta("rel_cond_salud",e),ti("condicion_salud",e,t),tn("medicamentos",e=[]),ti("medicamentos",e,t),tn("cambio_tratamiento",e=[]),ta("obs_cambio",e),ti("cambios_tratamiento",e,t),tn("disca_por_municipio",e=[]),ta("doc_localizacion",e),ti("discapacidad_municipio",e,t),tn("certificado_disca",e=[]),ta("certi_disca",e),ti("certificado_discapacidad",e,t),tn("datos_invalidez",e=[]),ti("certificado_invalidez",e,t),tn("cond_org_sist",e=[]),ti("condicion_organos",e,t),tn("dif_permanente",e=[]),ti("dificultad_permanente",e,t),tn("set-participacion",e=[]),ta("text_participacion",e),tn("set-apoyo",e),ta("text_apoyo_partic",e),ti("participacion_estudiantil",e,t),tn("asoc_disca",e=[]),ti("organizacion_disca",e,t),tn("apoyo_recibido",e=[]),ti("apoyo_dicapacidad",e,t),e=[],t}function tt(){for(var e={},a=t(".select-academics-data").map(function(){return t(this).attr("id")}).get(),i=t(".select-academics-data").map(function(){return t(this).next().next().attr("id")}).get(),n=0;n<i.length;n++)t("#"+i[n]).val(t("#"+a[n]+" option:selected").val());var o=[],s=[],r=[];tn("dif_educ_media",r),tn("dif_educ_superior",r),tn("dif_educ_paralelo",r),e.key_input="dificultades",e.val_input=r,(r=[]).push(e),e={};var l=[],d=t(".ingresos_u").serializeArray();return tn("jornada",d),tn("p_ingreso",d),ti("datos_academicos_adicionales",d,l),tn("div_tipo_institucion",s),tn("div_tipo_institucion_superior",s),tn("div_tipo_institucion_paralelo",s),e.key_input="otras_instituciones",e.val_input=s,(s=[]).push(e),e={},o.push(l),o.push(s),o.push(r),o}function te(){var t=[],e=[],a=[],i=[],n=[],o=[],s=[],r={},l={},d={},c={};return tn("set-sostenimiento",s),tn("otro_ingreso",s),ti("datos_economicos_adicionales",s,t),tn("set-permanencia",t),tn("set-beca",t),tn("set-materiales",e),tn("set-valor-materiales",e),t.push(e),tn("set-desplazamiento",e=[]),tn("set-valor-desplazamiento",e),t.push(e),tn("row_madre_academic",a),tn("row_padre_academic",a),tn("row_otro_academic",a),tn("row_madre_ocupacion",i),tn("row_padre_ocupacion",i),tn("row_otro_ocupacion",i),tn("row_madre_laboral",n),tn("row_padre_laboral",n),tn("row_otro_laboral",n),ta("motivo_ingreso",o),ta("expecativas_carrera",o),ta("expectativas_graduarse",o),r.key_input="expectativas_laborales",r.val_input=o,d.key_input="ocupacion_padres",d.val_input=i,l.key_input="nivel_educ_padres",l.val_input=a,c.key_input="situa_laboral_padres",c.val_input=n,t.push(l),t.push(d),t.push(c),t.push(r),t}function ta(e,a){json_insert={},null!=t("#"+e).val()&&t("#"+e).val().length>=3&&(json_insert.key_input_text=t("#"+e).attr("id"),json_insert.val_input_text=t("#"+e).val(),a.push(json_insert),json_insert={})}function ti(t,e,a){(json_insert={}).key_input=t,json_insert.val_input=e,a.push(json_insert),json_insert={}}function tn(e,a){t("#"+e).find("input").each(function(){json_object={};var e=t(this).attr("type");switch(e){case"text":t(this).hasClass("otros")||""==t(this).val()||(json_object.key_input_text=t(this).attr("id"),json_object.val_input_text=t(this).val(),a.push(json_object));break;case"number":if(t(this).hasClass("otros")||""==t(this).val())break;json_object.key_input_number=t(this).attr("id"),json_object.val_input_number=t(this).val(),a.push(json_object);break;case"date":if(t(this).hasClass("otros")||""==t(this).val())break;json_object.key_input_date=t(this).attr("id"),json_object.val_input_date=t(this).val(),a.push(json_object);break;case"radio":var i=to(t(this));""!==i.id&&(""!=i.id1?(json_object.key_input=t(this).attr("name"),json_object.val_input=t(this).val(),"text"==i.type&&(json_object.key_input_text=i.id,json_object.val_input_text=i.val,json_object.key_input_number=i.id1,json_object.val_input_number=i.val1),a.push(json_object)):(json_object.key_input=t(this).attr("name"),json_object.val_input=t(this).val(),"text"==i.type?(json_object.key_input_text=i.id,json_object.val_input_text=i.val):"number"==i.type&&(json_object.key_input_number=i.id,json_object.val_input_number=i.val),a.push(json_object)));break;case"checkbox":var i=to(t(this));""!==i.id&&(json_object.key_input=t(this).attr("id"),json_object.val_input="on","text"==i.type?(json_object.key_input_text=i.id,json_object.val_input_text=i.val):"number"==i.type&&(json_object.key_input_number=i.id,json_object.val_input_number=i.val),a.push(json_object));break;default:json_object.key_input=0,json_object.val_input=0}})}function to(t){var e={};if(!t.is(":checked"))return e.id="",e.val="",e;if(!t.hasClass("otro"))return e.id=t.attr("name"),e.val=t.val(),e;var a=t.parent().next().find("input"),i=t.parent().next().children("input:last");return e.id=a.attr("id"),e.val=a.val(),e.type=a.attr("type"),i.attr("id")!=e.id&&(e.id1=i.attr("id"),e.val1=i.val(),e.type1=i.attr("type")),e}function ts(e,a){t("#"+e).find("[name="+a+"]").on("click",function(){var a=t("#"+e+" .otro").parent().next();t(this).hasClass("otro")?(a.attr("hidden",!1),a.removeClass("otros")):(a.attr("hidden",!0),a.addClass("otros"))})}function tr(e,a){t("#"+e).find("[name="+a+"]").on("change",function(){var a=t("#"+e+" .otro").parent().next();t(this).hasClass("otro")&&t(this).prop("checked")?(a.attr("hidden",!1),a.removeClass("otros")):(a.attr("hidden",!0),a.addClass("otros"))})}function tl(e){t("."+e).each(function(){var a=t(this);a.data("oldVal",a.val()),a.bind("propertychange change input paste",function(t){a.data("oldVal")!=a.val()&&(a.data("oldVal",a.val()),"tabl_famiia"===e?[u,b]=[!0,!0]:[h,b]=[!0,!0])}),a.bind("keypress",function(t){td(t,a.attr("id"))})})}function td(t,e){switch(e){case"codigo_estudiantil":case"num_doc_ini":case"celular_modal":case"tel_res_modal":case"tel_ini":case"tel_acudiente_modal":case"tel_cont_2":case"estrato_modal":case"hijos_modal":case"semestre_actual":case"anio_ingreso":case"puntaje_icfes_modal":(function t(e){for(var a in tecla=String.fromCharCode(key=e.keyCode||e.which).toLowerCase(),letras=" 0123456789",tecla_especial=!1,especiales=[8,37,39])if(key==especiales[a]){tecla_especial=!0;break}-1!=letras.indexOf(tecla)||tecla_especial||e.preventDefault()})(t);break;case"nombre":case"apellido":(function t(e){for(var a in tecla=String.fromCharCode(key=e.keyCode||e.which).toLowerCase(),letras=" \xe1\xe9\xed\xf3\xfaabcdefghijklmn\xf1opqrstuvwxyz",tecla_especial=!1,especiales=[8,37,39,46])if(key==especiales[a]){tecla_especial=!0;break}-1!=letras.indexOf(tecla)||tecla_especial||e.preventDefault()})(t)}}t("#num_doc_ini").blur(function(){var e,a;t("#num_doc_ini").val().length>2&&(tp("step1"),V(t("#num_doc_ini").val()),t("#step-1 :input").prop("disabled",!1),null!=y?(X(t("#codigo_estudiantil").val()),e=y,a=g,t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_exist_user_extended",params:[e,a]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){C=JSON.parse(t)},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),C?(J("step-2"),J("step-3"),J("div_educ_media"),J("step-4"),J("step-5"),J("step-6"),O(),r=!0,V(t("#num_doc_ini").val(),1),function e(a){var n=!0;for(var o in a)"json_detalle"==o&&(n=!1);for(var o in a)if(null!=a[o])switch(o){case"vive_con":let s="";if(-1==a[o].indexOf("Array")){let r=(s=JSON.parse(a[o])).find(t=>"vive"===t.key_input);null!=r&&L(r.key_input,r.val_input),t("#table_familia").find("tbody tr").remove();for(let d=0;d<s.length-1;d++){let c=s[d];z(c.nombre,c.rol,d)}}else t("#table_familia").find("tbody tr").remove();break;case"fecha_nac":var u=new Date(a[o]),h="",v="";v=1+u.getMonth()<10?"0"+(1+u.getMonth()):1+u.getMonth(),h=10>u.getDate()?"0"+u.getDate():u.getDate(),t("#fecha_nac_modal").val(u.getFullYear()+"-"+v+"-"+h),A(a[o]);break;case"json_detalle":var m=a[o];m=JSON.parse(m);for(let f=0;f<m.length;f++){let b=m[f];null!=b.key_input_text?t("#"+b.key_input_text).val(b.val_input_text):"sede"==b.key_input_number?(t("#select_sede").val(b.val_input_number),t("#select_sede").trigger("change")):"orientacion_s"==b.key_input_number?(t("#select-orientacion").val(b.val_input_number),t("#select-orientacion").trigger("change")):(t("#acompanamientos").val(b.val_input_number),t("#acompanamientos").trigger("change")),null!=b.key_input&&(U(b.key_input),M(b.key_input)),null!=b.v_modal&&(n=!0)}break;case"actividades_ocio_deporte":var m=a[o];m=JSON.parse(m);for(let g=0;g<m.length;g++){let $=m[g];I($.name,$.value)}break;case"id_economics_data":null!=(i=a[o])&&(l=!0,S=!0,H(y,"exist_academics_data"),H(y,"exist_health_data"),H(y,"exist_discapacity_data"));break;default:"estrato"==o||"puntaje_icfes"==o||"hijos"==o||"tel_res"==o||"celular"==o||"tel_acudiente"==o||"emailpilos"==o?t("#"+o+"_modal").val(a[o]):(t("#"+o).val(a[o]),t("#"+o).trigger("change"))}n||(swal({title:"",text:"Este usuario ha sido registrado con otro formulario",type:"info"}),B()),p=!1}($)):(O(),t("#num_doc_ini").val(""),swal("Waarning","No existe relacion entre el numero de documento y el codigo del estudiante, intentalo nuevamente.","warning"))):swal({title:"Warning",text:"Usuario inexistente en la base de datos, \xbfEsta seguro de registrar este usuario?.",type:"warning",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:"Confirmar",cancelButtonText:"Cancelar",closeOnConfirm:!1,closeOnCancel:!1},function(e){e?(swal({title:"Confirmado",text:"",type:"success",timer:1500}),t("#step-1 :input").prop("disabled",!1),O()):(swal({title:"Cancelado",text:"Ingresa nuevamente el documento del estudiante",type:"error",timer:1500}),t("#num_doc_ini").val(""))}))});function tc(e){var a=!1;return t("."+e+"[required]").each(function(){var e=t(this);if("radio"==e.attr("type")){if(t('input:radio[name="'+e.attr("name")+'"]').is(":checked")){let i=t(this).prev();t(this).prev().hasClass("alert")&&i.attr("hidden",!0)}else{a=!0;t(this).prev().attr("hidden",!1)}}else if(""==e.val()){a=!0;t(this).next().attr("hidden",!1)}else{let n=t(this).next();t(this).next().hasClass("alert")&&n.attr("hidden",!0)}}),a}function tp(e){t("."+e+"[required]:visible").each(function(){let e=t(this).next();t(this).next().hasClass("alert")&&e.attr("hidden",!0)})}function tu(){var e=D(t("#table_familia"));tn("set-vive",e);var a=JSON.stringify(e),n=t("#hijos_modal").val(),o=t("#estrato_modal").val();V(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step2",params:[y,o,n,a,i]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function t8(){var e=Q();V(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_discapacity_dt",params:[e,y,o]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}function th(){var e=t("#puntaje_icfes_modal").val(),a=t("#anio_ingreso").val(),i=t("#colegio").val();V(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step3",params:[y,e,a,i]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}})}t(".step1").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),p=!0,b=!0)}),e.bind("keypress",function(t){td(t,e.attr("id"))})}),t(".step2").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),u=!0,b=!0)}),e.bind("keypress",function(t){td(t,e.attr("id"))})}),t(".step3").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),h=!0)}),e.bind("keypress",function(t){td(t,e.attr("id"))})}),t(".step4").each(function(){var e=t(this);e.data("oldVal",e.val()),"id_discapacidad"===e.attr("id")&&e.bind("propertychange change",function(t){e.data("oldVal")!=e.val()&&(null!=e.data("oldVal")&&(v=!0,b=!0),e.data("oldVal",e.val()))})}),t(".step5").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),m=!0,b=!0)})}),t(".step6").each(function(){var e=t(this);e.data("oldVal",e.val()),e.bind("propertychange change input paste",function(t){e.data("oldVal")!=e.val()&&(e.data("oldVal",e.val()),E=!0)})}),t('input[type="radio"]').on("change",function(){t(this).hasClass("step1")?(p=!0,b=!0):t(this).hasClass("step2")?(u=!0,b=!0):t(this).hasClass("step3")?(h=!0,b=!0):t(this).hasClass("step4")?(v=!0,b=!0):t(this).hasClass("step5")?(m=!0,b=!0):t(this).hasClass("step6")&&(E=!0)}),t("textarea").on("change",function(){t(this).hasClass("step4")&&(f=!0,b=!0)}),t("#codigo_estudiantil").each(function(){var e=t(this);e.bind("keypress",function(t){td(t,e.attr("id"))})}),t('input[type="checkbox"]').on("change",function(){t(this).hasClass("step4")?(f=!0,b=!0):t(this).hasClass("step5")?(m=!0,b=!0):t(this).hasClass("step6")&&(E=!0,b=!0)}),t("#emailpilos_modal").on("keyup",function(){/([A-Z0-9a-z_-][^@])+?@[^$#<>?]+?\.[\w]{2,4}/.test(this.value)?(t("#errorEPilos").attr("hidden",!0),t("#successEPilos").attr("hidden",!1),setTimeout(()=>{t("#successEPilos").attr("hidden",!0)},3e3)):(t("#errorEPilos").attr("hidden",!1),t("#successEPilos").attr("hidden",!0))}),t("#emailinstitucional").on("keyup",function(){/([A-Z0-9a-z_-][^@])+?@[^$#<>?]+?\.[\w]{2,4}/.test(this.value)?(t("#errorEInst").attr("hidden",!0),t("#successEInst").attr("hidden",!1),setTimeout(()=>{t("#successEInst").attr("hidden",!0)},3e3)):(t("#errorEInst").attr("hidden",!1),t("#successEInst").attr("hidden",!0))}),t("#smartwizard").on("leaveStep",function(b,$,C,E,j){var B,O,A,z,T,R,N,I,H,F,Y,Z,G,J,K,ta,ti,to,ts,tr,tl,td,tp,tv,tm,tf,tb,tg,ty,t$,tx,t_,tk,tC,tw;if("forward"===E)switch(document.getElementById("modal_acomp").scrollIntoView({behavior:"auto"}),function e(){t("#tipo_doc").val(t("#tipo_doc_ini option:selected").val());for(var a=t(".select-registro").map(function(){return t(this).attr("id")}).get(),i=t(".select-registro").map(function(){return t(this).next().next().attr("id")}).get(),n=0;n<i.length;n++)t("#"+i[n]).val(t("#"+a[n]+" option:selected").val())}(),C){case 0:if(O=!1,t(".step1[required]:visible").each(function(){if(""==t(this).val()){O=!0;t(this).next().attr("hidden",!1)}else{let e=t(this).next();t(this).next().hasClass("alert")&&e.attr("hidden",!0)}}),O)return swal("Oops!","Rellena todos los campos necesarios para poder avanzar","warning"),!1;if(s){B=t("#programa").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"get_program",params:B}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){var e;e=JSON.parse(t).cod_univalle,_=e},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),A=t("#codigo_estudiantil").val(),z=t("#nombre").val(),T=t("#apellido").val(),R=t("#emailinstitucional").val(),N=""+A+"-"+_,I=(I=z.charAt(0)+A+T.charAt(0)).toUpperCase(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_mdl_user",params:[N,z,T,R,I]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){g=t},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),s=!1}r?p&&(V(t("#num_doc_ini").val()),t("#num_doc_modal").val(t("#num_doc_ini").val()),(H=[]).push({name:"deportes",value:e.getArr()}),H.push({name:"actividades",value:a.getArr()}),H=JSON.stringify(H),F=t(".talentospilos_usuario").serializeArray(),Y=t("#div_tipo_institucion ").find("[name=estamento]:checked").val(),F.push({name:"estamento",value:Y}),F.push({name:"id_ciudad_nac",value:t("#id_ciudad_ini").val()}),Z=t("#programa").val(),tn("otra_identidad",G=[]),G.push({key_input_number:"orientacion_s",val_input_number:t("#select-orientacion").val()}),G.push({v_modal:!0}),tn("otra_orientacion",G),tn("div_contacto_2",G),tn("otros_acomp",G),tn("sede_div",G),G=JSON.stringify(G),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_data_ases",params:[F,H,Z,y,G]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),p=!1):(X(t("#codigo_estudiantil").val()),t("#num_doc_modal").val(t("#num_doc_ini").val()),(J=[]).push({name:"deportes",value:e.getArr()}),J.push({name:"actividades",value:a.getArr()}),J=JSON.stringify(J),K=t(".talentospilos_usuario").serializeArray(),ta=t("#div_tipo_institucion ").find("[name=estamento]:checked").val(),K.push({name:"estamento",value:ta}),K.push({name:"id_ciudad_nac",value:t("#id_ciudad_ini").val()}),ti=D(t("#table_familia")),to=t("#programa").val(),tn("otra_identidad",ts=[]),ts.push({key_input_number:"orientacion_s",val_input_number:t("#select-orientacion").val()}),ts.push({v_modal:!0}),tn("otra_orientacion",ts),tn("div_contacto_2",ts),tn("otros_acomp",ts),tn("sede_div",ts),ts=JSON.stringify(ts),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data",params:[K,J,ti,to,g,ts]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),r=!0,p=!1),l&&(V(t("#num_doc_ini").val()),W(y,"get_economics_data"),function e(a){let i=Object.values(a);for(let n=2;n<i.length;n++){var o=JSON.parse(i[n]);if(null!=o){if(Array.isArray(o))for(let s=0;s<o.length;s++)void 0!==o[s].key_input?(L(o[s].key_input,o[s].val_input),0==o[s].val_input&&(M(o[s].key_input),t("#"+o[s].key_input_text).val(o[s].val_input_text))):t("#"+o[s].key_input_text).val(o[s].val_input_text);else"beca"===o.key_input?(L(o.key_input,o.val_input),0==o.val_input&&(M("beca"),t("#"+o.key_input_text).val(o.val_input_text),t("#"+o.key_input_number).val(o.val_input_number))):L("solvencia_econo",o)}}}(k));break;case 1:if(tc("step2"))return swal("Oops!","Rellena todos los campos necesarios para poder avanzar","warning"),!1;t("#table_ingresos").find("tbody").find("tr").remove(),l?u&&(tu(),tr=te(),tl=t("#estrato_modal").val(),V(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_economics_dt",params:[tr,tl,y,i]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),u=!1):(td=te(),tp=t("#estrato_modal").val(),V(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_economics_data",params:[td,tp,y]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){i=t},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),tu(),l=!0,u=!1),w&&(V(t("#num_doc_ini").val()),W(y,"get_academics_data"),function e(a){for(let i in a)switch(i){case"id":n=a[i];break;case"otras_instituciones":let o=JSON.parse(a[i]);for(let s=0;s<o.length;s++)t("#"+o[s].key_input_text).val(o[s].val_input_text),null!=o[s].key_input&&L(o[s].key_input,o[s].val_input);break;case"dificultades":let r=JSON.parse(a[i]);for(let l=0;l<r.length;l++)t("#"+r[l].key_input_text).val(r[l].val_input_text);break;case"datos_academicos_adicionales":let d=JSON.parse(a[i]);t("#table_ingresos").find("tbody").find("tr").remove();for(let c=0;c<d.length;c++)null!=d[c].name&&-1!=d[c].name.indexOf("anio")&&q(c+1,d[c].value,d[c+1].value,d[c+2].value),t("#"+d[c].key_input_text).val(d[c].val_input_text),t("#"+d[c].key_input_date).val(d[c].val_input_date),null!=d[c].key_input&&L(d[c].key_input,d[c].val_input);setTimeout(()=>{P()},1e3);break;default:"observaciones"==i?t("#"+i+"_modal").val(a[i]):t("#"+i).val(a[i])}}(k),h=!1);break;case 2:if(tc("step3"))return swal("Oops!","Rellena todos los campos necesarios para poder avanzar","warning"),!1;w?h&&(th(),tv=tt(),V(t("#num_doc_ini").val()),tm=t("#programa").val(),tf=t("#titulo_1").val(),tb=t("#observaciones_modal").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"update_academics_dt",params:[tv,tm,tf,tb,y,n]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t&&swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),h=!1):(th(),tg=tt(),V(t("#num_doc_ini").val()),ty=t("#programa").val(),t$=t("#titulo_1").val(),tx=t("#observaciones_modal").val(),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_academics_data",params:[tg,ty,t$,tx,y]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),w=!0,h=!1),d&&(V(t("#num_doc_ini").val()),W(y,"get_discapacity_data"),function e(a){for(let i in a){"id"==i&&(o=a[i]);let n=JSON.parse(a[i]);for(let s=0;s<n.length;s++)"on"===n[s].val_input?U(n[s].key_input):(L(n[s].key_input,n[s].val_input),0==n[s].val_input&&(M(n[s].key_input),t("#"+n[s].key_input_text).val(n[s].val_input_text))),"doc_localizacion"!==n[s].key_input_text&&"certi_disca"!==n[s].key_input_text&&(t("#"+n[s].key_input_text).val(n[s].val_input_text),t("#"+n[s].key_input_date).val(n[s].val_input_date))}}(k));break;case 3:S?v&&(t_=f,tk=t("#input_discapacidad").val(),V(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step4",params:[y,tk]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){t_||swal({title:"Cambios actualizados exitosamente!",text:"",type:"success",timer:1500})},error:function(t){swal({title:"Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.",text:"",type:"error",timer:1500})}}),v=!1):(tC=t("#input_discapacidad").val(),V(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"save_data_user_step4",params:[y,tC]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),S=!0,v=!1),f&&(t8(),f=!1);break;case 4:d?m&&(t8(),m=!1):(tw=Q(),V(t("#num_doc_ini").val()),t.ajax({async:!1,type:"POST",data:JSON.stringify({function:"insert_disapacity_data",params:[tw,y]}),url:"../managers/student_profile/studentprofile_api.php",success:function(t){},error:function(t){swal("Error","Error al comunicarse con el servidor, por favor int\xe9ntelo nuevamente.","error")}}),d=!0,m=!1),c&&(V(t("#num_doc_ini").val()),W(y,"get_health_data"),function e(a){for(let i in a)switch(i){case"id":x=a[i];break;case"servicio_salud_vinculado":t("#EPS").val(a[i]);break;default:let n=JSON.parse(a[i]);for(let o=0;o<n.length;o++)"on"===n[o].val_input?U(n[o].key_input):L(n[o].key_input,n[o].val_input),t("#"+n[o].key_input_text).val(n[o].val_input_text),t("#"+n[o].key_input_number).val(n[o].val_input_number),t("#"+n[o].key_input_date).val(n[o].val_input_date)}}(k))}})})}}});