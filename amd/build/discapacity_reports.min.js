/**
 * Discapacity report
 * @module amd/src/historic_academic_reports
 * @author Juan Pablo Castro
 * @copyright 2018 Juan Pablo Castro<juan.castro.vasquez@correounivalle.edu.co>
 * @license  http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */ define(["jquery","block_ases/jszip","block_ases/jquery.dataTables","block_ases/dataTables.autoFill","block_ases/dataTables.buttons","block_ases/buttons.html5","block_ases/buttons.flash","block_ases/buttons.print","block_ases/bootstrap","block_ases/sweetalert","block_ases/jqueryui","block_ases/select2","block_ases/Chart","block_ases/loading_indicator"],function(a,s,t,o,c,i,e,l,d,n,r,p,g,u){return{init:function(){function s(s){a("#div_JSONform").empty();let t="";t+='<div class = "row"> <div class= "col-lg-8 col-md-8 col-sm-8 col-xs-8"><strong> Dificultades permanentes en funciones:</strong> </div>',t+='<div class= "col-lg-4 col-md-4 col-sm-4 col-xs-4">'+s.cant_dificultad_permanente_funciones+"</div></div>",t+='<div class = "row"> <div class= "col-lg-8 col-md-8 col-sm-8 col-xs-8"><strong> Condiciones de salud a tener en cuenta:</strong> </div>',t+='<div class= "col-lg-4 col-md-4 col-sm-4 col-xs-4">'+s.cant_condicion_salud_organos+"</div></div>",t+='<div class = "row"> <div class= "col-lg-8 col-md-8 col-sm-8 col-xs-8"><strong> Necesidades diferentes:</strong> </div>',t+='<div class= "col-lg-4 col-md-4 col-sm-4 col-xs-4">'+s.cant_necesidades_situaciones+"</div></div>",t+='<div class = "row"> <div class= "col-lg-8 col-md-8 col-sm-8 col-xs-8"><strong> Factores de impacto (escenarios universitarios):</strong> </div>',t+='<div class= "col-lg-4 col-md-4 col-sm-4 col-xs-4">'+s.cant_factores_impacto+"</div></div>",t+='<div class = "row"> <div class= "col-lg-8 col-md-8 col-sm-8 col-xs-8"><strong> Posibilidades en actividades cotidianas:</strong> </div>',t+='<div class= "col-lg-4 col-md-4 col-sm-4 col-xs-4">'+s.cant_posibilidad_actividades+"</div></div>",a("#div_JSONform").append(t),a("#modal_JSON").fadeIn(300)}u.show(),a(".bt_students_data").click(function(){var s=a(this).children("span");s.hasClass("glyphicon-chevron-right")?(s.removeClass("glyphicon-chevron-right"),s.addClass("glyphicon-chevron-down")):(s.addClass("glyphicon-chevron-right"),s.removeClass("glyphicon-chevron-down"));var t=a(a(this).data("target"));"none"!=t.css("display")?t.hide(300):t.show(300)}),a(document).on("click","#tableDiscapacityReports tbody tr td",function(){var s,t="";s=t=a(this).parents("tr").find("td:first").html(),a.ajax({type:"POST",data:{load:"getUserName",params:s},url:"../managers/discapacity_reports/discapacity_reports_api.php",dataType:"json",cache:!1,async:!0,success:function(a){location.href="student_profile.php"+location.search+"&student_code="+a},failure:function(a){alert("No")}})}),a(document).ready(function(){a.ajax({type:"POST",data:{load:"loadTableDiscapacityReports"},url:"../managers/discapacity_reports/discapacity_reports_api.php",success:function(s){a("#div_table_discapacity_reports").empty(),a("#div_table_discapacity_reports").append('<table id="tableDiscapacityReports" class="display" cellspacing="0" width="100%"><thead><thead></table>'),a("#tableDiscapacityReports").DataTable(s),a("#div_table_discapacity_reports").css("cursor","pointer"),u.hide()},error:function(a){u.hide()},dataType:"json",cache:!1,async:!0,failure:function(a){}}),a.ajax({type:"POST",data:{load:"getDataGraphic"},url:"../managers/discapacity_reports/discapacity_reports_api.php",success:function(a){var s,t;s=a,t=document.getElementById("grafica_tipos").getContext("2d"),g.defaults.polarArea.animation.animateScale=!1,new g(t,{type:"pie",data:{labels:["Cognitiva","Psicosocial","F\xedsica","Sensorial","M\xfaltiple","Otra"],datasets:[{data:s,backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255,99,132,1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],borderWidth:3}]},options:{title:{display:!0,text:"N\xfamero de estudiantes por tipo de discapacidad",fontSize:30},starAngle:0,animation:{animateRotate:!0,animateScale:!0},showTooltips:!0,showPercentages:!0}})},dataType:"json",cache:!1,async:!0,failure:function(a){}})}),a(".mymodal-close").click(function(){a("#modal_JSON").hide()}),a(".btn-danger-close").click(function(){a("#modal_JSON").hide()}),a(".outside").click(function(){var s=a(this);swal({title:"Confirmaci\xf3n de salida",text:"",type:"warning",showCancelButton:!0,confirmButtonText:"Salir"},function(t){t&&a(s).parent(".mymodal").fadeOut(300)})})}}});