{"version":3,"sources":["../src/grader.js"],"names":["define","Vue","VueRouter","Vuex","VueResource","VModal","VueFlex","VueToasted","loading_indicator","_","g_store","g_enums","g_utils","g_c_main","g_router","g_filters","g_const","use","default","dialog","iconPack","graderVueEvents","UPDATE_CATEGORY_OK","ADD_ELEMENT_OK","modalsEnum","EDIT_CATEGORY","EDIT_ITEM","ADD_ELEMENT","categoryElement","name","id","itemElement","partialExamElement","elementTypes","store","Store","SelectAggregation","component","template","props","data","aggregation","aggregations","SIMPLE","created","initialAggregation","methods","changeAggregation","$event","$emit","target","value","EditCategoryForm","categoryFullName","gradeTypeId","boton","computed","mapState","mapGetters","category","isCourseCategory","depth","mounted","fullname","setAggretation","updateCategory","$store","dispatch","actions","UPDATE_CATEGORY","aggregationcoef","then","catch","$toasted","show","duration","theme","CloseModalButton","modalName","type","String","required","closeButtonStyle","position","top","right","ModalAddElement","ModalEditCategory","AddElementForm","categoryElementTypeId","partialExamElementId","elementTypeId","elementName","elementAggregationCoef","parentCategory","selectedCategory","weigthedMeanOfGrades","PROMEDIO","isNumber","evt","window","event","charCode","which","keyCode","preventDefault","extractItem","itemname","parent_category","courseid","course","extractPartialExam","extractCategory","createItem","item","ADD_ITEM","icon","$router","go","createCoursePartialExam","partialExam","ADD_PARTIAL_EXAM","createCategory","payload","weight","ADD_CATEGORY","createElement","ItemMiniMenu","deleteItem","DELETE_ITEM","itemId","showDeleteItemDialog","$modal","title","text","buttons","handler","finally","hide","CategoryMiniMenu","categoryId","Number","showDelete","Boolean","allowEditName","style","display","gridTemplateColumns","gridColumnGap","categoryById","deleteCategory","DELETE_CATEGORY","showDeleteElementDialog","showEditDialog","commit","mutations","SET_SELECTED_CATEGORY_ID","showAddElementDialog","ThCourse","showMenu","editZoneStyles","courseCategoryId","courseLevel","object","CourseMiniMenu","ThCategory","length","node","document","innerHTML","content","textContent","catName","slice","catWeight","$options","filters","round","aggregationCoef","showFullName","getCatClass","catGetWeightClass","element","childSize","categoryChildSize","categoryGradeItem","items","grade_item","parent","weightedAggregation","catFocus","uptadeCatName","catBlur","updateCategoryName","catWFocus","updateWeight","catWBlur","saveAggregationCoef","UPDATE_ITEM","trunc","ItemActionsMini","ThStudentNames","lastNameDirectionAsc","firstNameDirectionAsc","stickyStyles","left","changeOrderToLastame","SET_STUDENT_SORT_METHOD","sortStudentMethods","LAST_NAME","order","sortDirection","ASC","changeOrderToName","FIRST_NAME","TrItems","orderedItemIds","getContent","innerText","replace","sufix","update","ThItemManualAndMod","contente","showMenuItems","getClass","getWeightClass","focus","uptadeContent","blur","saveNameChanges","wfocus","wblur","parseFloat","saveAggregationCoefChanges","mapActions","console","log","categoryid","ThItemCategory","categoryParent","iteminstance","itemName","ThStudent","students","student","studentById","studentId","studentFullName","lastname","firstname","TdGrade","updateGrade","UPDATE_GRADE","step","Math","pow","decimalPlaces","tabIndex","itemIndex","studentsCount","studentIndex","inputDisabled","itemtype","grade","grades","gradeId","itemid","finalGrade","get","finalgrade","set","TrGrades","studentGradeIdsOrdered","orderGradeIdsInItemSetOrder","gradeIds","itemOrderIds","filter","func","trun","router","routes","app","components","init","$mount","$","ready"],"mappings":"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","sourcesContent":["// @flow\n/*::\ntype Item = {\n  id: number,\n  itemname: number,\n  itemtype: boolean,\n  grademin: number,\n  grademax: number,\n  categoryid: string,\n  aggregationcoef: number,\n  itemtype: <manual|mod|category|course>,\n  iteminstance: number // In the case than itemtype is category, iteminstace have the category parent id\n};\n*/\n/*::\ntype AgregationEnum = {\n    SIMPLE: 0,\n    PONDERADO:10\n}\n */\n/*::\ntype Category = {\n  id: number,\n  fullname: string,\n  depth: number,\n  parent: number,\n  grade_item: number, //id of the item asociated to this category\n  aggregation: AgregationEnum\n};\n*/\n/*::\ntype Column = {\n    text: string\n}\n */\n\n\n/*::\ntype Student = {\n  id: number,\n  fistname: string,\n  username: string, // moodle user name, in other words, student code\n  lastname: string,\n  gradeIds: array\n};\n*/\n/*::\ntype Agregation = {\n  id: number,\n  name: string\n};\n*/\n/*::\ntype EditItemResponse = {\n    category: Category,\n    levels: Array\n}\n*/\n\n/*::\ntype Grade = {\n  id: number,\n  userid: number,\n  itemid: number,\n  rawgrademin: number,\n  rawgrademax: number,\n  finalgrade: string,\n};\n*/\n// Generate unique IDs for use as pseudo-private/protected names.\n// Similar in concept to\n// <http://wiki.ecmascript.org/doku.php?id=strawman:names>.\n//\n// The goals of this function are twofold:\n//\n// * Provide a way to generate a string guaranteed to be unique when compared\n//   to other strings generated by this function.\n// * Make the string complex enough that it is highly unlikely to be\n//   accidentally duplicated by hand (this is key if you're using `ID`\n//   as a private/protected name on an object).\n//\n// Use:\n//\n//     var privateName = ID();\n//     var o = { 'public': 'foo' };\n//     o[privateName] = 'bar';\n\ndefine([\n    'block_ases/vendor-vue',\n    'block_ases/vendor-vue-router',\n    'block_ases/vendor-vuex',\n    'block_ases/vendor-vue-resource',\n    'block_ases/vendor-vue-js-modal',\n    'block_ases/vendor-vue-flex',\n    'block_ases/vendor-vue-toasted',\n    'block_ases/vendor-loading-indicator',\n    'block_ases/vendor-lodash',\n    'block_ases/grader-store',\n    'block_ases/grader-enums',\n    'block_ases/grader-utils',\n    'block_ases/grader-component-main',\n    'block_ases/grader-router',\n    'block_ases/grader-filters',\n    'block_ases/grader-constants',\n    'block_ases/Chart',\n    'block_ases/vue-chartjs',\n    ], function (\n        Vue,\n        VueRouter,\n        Vuex,\n        VueResource,\n        VModal,\n        VueFlex,\n        VueToasted,\n        loading_indicator,\n        _,\n        g_store,\n        g_enums,\n        g_utils,\n        g_c_main,\n        g_router,\n        g_filters,\n        g_const,\n        g_chartjs,\n        g_vuechartjs,){\n    Vue.use(VueRouter);\n    Vue.use(Vuex);\n    Vue.use(VueResource);\n    Vue.use(VModal.default, { dialog: true });\n    Vue.use(VueFlex);\n    Vue.use(VueToasted.default, {iconPack: 'custom-class'});\n    var graderVueEvents = {\n        UPDATE_CATEGORY_OK: 'updateCategoryOK',\n        ADD_ELEMENT_OK: 'addElementOK'\n    };\n\n    var modalsEnum = {\n        EDIT_CATEGORY : 'edit-category',\n        EDIT_ITEM : 'edit-item',\n        ADD_ELEMENT: 'add-element'\n    };\n\n    const categoryElement = { name: 'CATEGORÍA', id: 0 };\n    const itemElement = { name: 'ÍTEM', id: 1 };\n    const partialExamElement = { name: 'PARCIAL', id: 2 };\n    const elementTypes = [categoryElement, itemElement, partialExamElement];\n\n    var store = new Vuex.Store(g_store.store);\n    var SelectAggregation = Vue.component('select-aggregation', {\n        template: `\n            <select \n            v-model=\"aggregation\" \n            @change=\"changeAggregation($event)\" \n            id=\"aggregation\">\n                <option \n                v-for=\"_aggregation in aggregations\"\n                v-bind:selected=\"_aggregation.id == aggregation\"\n                v-bind:value=\"_aggregation.id\"\n                >{{_aggregation.name}}</option>\n            </select>\n        `,\n        props: ['initialAggregation'],\n        data: function () {\n            return {\n                aggregation: g_enums.aggregations.SIMPLE,\n                aggregations: g_const.aggregations\n            }\n        },\n        created: function () {\n            this.aggregation = this.initialAggregation? this.initialAggregation: this.aggregation;\n        },\n        methods: {\n            changeAggregation($event) {\n                this.$emit('changeAggregation', $event.target.value);\n            }\n        }\n    });\n    var EditCategoryForm = Vue.component('edit-category-form', {\n            // language=HTML\n            template: `    \n                <div style=\"width: 600px; height: 300px;\" class=\"edit-category-form\">\n                    <form style=\"width: 570px; height: 270px;\">\n                        <h3 :style=\"{ 'text-align': 'center' }\">Editando Categoría:</h3>\n                        <br />\n                        <label for=\"categoryFullName\">\n                            Nombre de la categoria:  \n                        </label>\n                        <input :disabled=\"isCourseCategory\" id=\"categoryFullName\" v-model=\"categoryFullName\">\n                        <br />\n                        <label for=\"aggregation\">\n                        Tipo de calificación:\n                        </label>\n                        <select-aggregation \n                                v-bind:initialAggregation=\"category.aggregation\"\n                                v-on:changeAggregation=\"changeAggregation\">\n                        </select-aggregation>\n                        <br />\n                        <br />\n                        <div style=\"text-align:center; bottom:50px;\">\n                                <button :style=\"boton\" type=\"button\" v-on:click=\"updateCategory\">Guardar</button>\n                        </div>\n                    </form>\n                </div>\n            `\n        ,\n        data: function() {\n                return {\n                    categoryFullName: '',\n                    gradeTypeId: 0,\n                    aggregations: g_const.aggregations,\n                    boton: {\n                        'background-color': '#cd1f32',\n                        'color': 'white'\n                    }\n                }\n        },\n        computed: {\n            ...Vuex.mapState(['selectedCategoryId']),\n            ...Vuex.mapGetters({\n                category: 'selectedCategory'\n            }),\n            isCourseCategory: function () {\n                return this.category.depth == 1;\n            }\n        },\n        mounted: function () {\n          this.categoryFullName = this.category.fullname;\n\n          this.aggregation = this.category.aggregation;\n        },\n        methods: {\n                setAggretation(aggregation) {\n                  this.aggregation = aggregation;\n                },\n                changeAggregation(aggregation) {\n                    this.aggregation = aggregation;\n                },\n                updateCategory() {\n                    this.$store.dispatch(\n                        g_store.actions.UPDATE_CATEGORY,\n                        {\n                            ...this.category,\n                            fullname: this.categoryFullName,\n                            aggregation: this.aggregation,\n                            aggregationcoef: 50\n                        })\n                        .then(()=> {\n                            this.$emit(graderVueEvents.UPDATE_CATEGORY_OK);\n                        })\n                        .catch( ()=> {\n                            this.$toasted.show('Ha habido un error guardando la categoria', {duration: 3000, theme:'bubble'});\n                        });\n                }\n        }\n        }\n        );\n    var CloseModalButton = Vue.component('close-modal-button', {\n        template: `\n        <i class=\"fa fa-2x fa-times-circle\" v-bind:style=\"closeButtonStyle\"  @click=\"$modal.hide(modalName)\"></i>\n        `,\n        props: {\n            modalName: {\n                type: String,\n                required: true\n            }\n        },\n        data: function() {\n            return {\n                closeButtonStyle: {\n                    position: \"absolute\",\n                    top: \"10px\",\n                    right: \"10px\"\n                }\n            }\n        }\n    });\n    var ModalAddElement = Vue.component('modal-add-element', {\n            template: `\n       <modal \n        v-bind:name=\"modalName\"\n        v-bind:transition=\"'nice-modal-fade'\"\n        :draggable=\"true\"\n        >\n            <add-element-form v-on:addElementOK=\"$modal.hide(modalName)\"></add-element-form>\n            <close-modal-button v-bind:modalName=\"modalName\"></close-modal-button>\n       </modal>\n       `,\n        data: function() {\n                return {\n                    modalName: modalsEnum.ADD_ELEMENT\n                }\n        }\n        });\n    var ModalEditCategory = Vue.component('modal-edit-category',{\n       template: `<modal\n                    v-bind:name=\"modalName\" \n                    v-bind:transition=\"'nice-modal-fade'\"\n                    :draggable=\"true\"\n                    >\n                        <edit-category-form   v-on:updateCategoryOK=\"$modal.hide(modalName)\"></edit-category-form>\n                        <close-modal-button v-bind:modalName=\"modalName\"></close-modal-button>\n                   </modal>\n       `,\n        data: function () {\n           return {\n               modalName: modalsEnum.EDIT_CATEGORY\n           }\n        }\n    });\n\n    var AddElementForm = Vue.component('add-element-form',{\n       template: `\n        <div class=\"add-element-form\">\n           <form>\n           <h2 :style=\"{ 'text-align': 'center' }\">Añadir elemento</h2>\n           <label></label>\n           <select id=\"elementType\" v-model=\"elementTypeId\">\n               <option v-for=\"elementType in elementTypes\" v-bind:value=\"elementType.id\">\n                {{elementType.name}}\n               </option>\n           </select>\n            <br/>\n           <label :style=\"{ 'text-align': 'center' }\" for=\"elementName\">\n            Nombre del elemento:\n            </label>\n            <input id=\"elementName\" v-model=\"elementName\">\n           <br />\n            <template v-if=\"parentCategory.aggregation == weigthedMeanOfGrades\">\n                <label for=\"elementAggregationCoef\">\n                    Peso: \n                </label>\n                        <input \n            placeholder=\"Ingrese un valor entre 1 y 100\" \n            id=\"elementAggregationCoef\" \n            v-model=\"elementAggregationCoef\" type=\"number\"\n            v-on:keypress=\"isNumber($event)\">\n            </template>\n            <br/>\n            <template v-if=\"elementTypeId === categoryElementTypeId || elementTypeId === partialExamElementId\">\n                <label >\n                    Tipo de agregación\n                </label>\n                <select-aggregation\n                    v-bind:changeAggregation=\"changeAggregation\"\n                />\n            </template>\n            <br />\n            <div style=\"text-align:center\">\n                <button :style=\"boton\" type=\"button\" v-on:click=\"createElement()\">Añadir</button>\n            </div>\n           </form>\n       </div>\n       `,\n        data : function () {\n           return {\n               boton: {\n                   'background-color': '#cd1f32',\n                   'color': 'white'\n               },\n               elementTypes: elementTypes,\n               categoryElementTypeId: categoryElement.id,\n               partialExamElementId: partialExamElement.id,\n               elementTypeId: itemElement.id,\n               elementName: '',\n               aggregation: g_enums.aggregations.SIMPLE,\n               elementAggregationCoef: ''\n           }\n        },\n        computed: {\n            ...Vuex.mapState(['selectedCategoryId', 'course']),\n            ...Vuex.mapGetters(['selectedCategory']),\n            parentCategory: function () {\n                return this.selectedCategory;\n            },\n            weigthedMeanOfGrades: function () {\n                return g_enums.aggregations.PROMEDIO;\n            }\n        },\n        methods: {\n            isNumber: function(evt) {\n                evt = (evt) ? evt : window.event;\n                var charCode = (evt.which) ? evt.which : evt.keyCode;\n                if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\n                    evt.preventDefault();\n                } else {\n                    return true;\n                }\n            },\n           changeAggregation(aggregation) {\n             this.aggregation = aggregation;\n           },\n            extractItem() {\n               return {\n                   itemname: this.elementName,\n                   aggregationcoef: this.elementAggregationCoef,\n                   parent_category: this.parentCategory.id,\n                   courseid: this.course.id,\n               };\n            },\n            extractPartialExam() {\n                return {\n                    itemname: this.elementName,\n                    aggregationcoef: this.elementAggregationCoef,\n                    parent_category: this.parentCategory.id,\n                    courseid: this.course.id,\n                    aggregation: this.aggregation\n                };\n            },\n            extractCategory() {\n              return {\n                fullname: this.elementName,\n                courseid: this.course.id,\n                parent_category: this.parentCategory.id,\n                aggregation: this.aggregation\n              };\n            },\n            createItem() {\n                const item = this.extractItem();\n                this.$store.dispatch(g_store.actions.ADD_ITEM, item)\n                    .then(()=> {\n                        this.$emit(graderVueEvents.ADD_ELEMENT_OK);\n                        this.$toasted.show(\n                            `Se ha añadido el item '${item.itemname}'`,\n                            { duration : 3000, icon: 'fa fa-check'});\n                        this.$router.go();\n                    })\n                    .catch(() => {\n                        this.$toasted.show(\n                            'Ha ocurrido un error guardando el nuevo item.',\n                            {duration: 3000, theme: 'bubble'}\n                        )\n                    })\n            },\n            /* examen parcial */\n            createCoursePartialExam() {\n                const partialExam = this.extractPartialExam();\n                this.$store.dispatch(g_store.actions.ADD_PARTIAL_EXAM,  partialExam)\n                    .then(()=> {\n                        this.$emit(graderVueEvents.ADD_ELEMENT_OK);\n                        this.$toasted.show(\n                            `Se ha añadido el parcial '${partialExam.itemname}'`,\n                            { duration : 3000, icon: 'fa fa-check'});\n                        this.$router.go();\n                    })\n                    .catch(() => {\n                        this.$toasted.show(\n                            'Ha ocurrido un error guardando el nuevo parcial.',\n                            {duration: 3000, theme: 'bubble'}\n                        )\n                    })\n            },\n            createCategory() {\n              const category = this.extractCategory();\n              const payload = {category, weight: this.elementAggregationCoef};\n              this.$store.dispatch(g_store.actions.ADD_CATEGORY, payload)\n                  .then(()=>{\n                      this.$emit(graderVueEvents.ADD_ELEMENT_OK);\n                      this.$toasted.show(\n                          `Se ha añadido la categoria '${category.fullname}'`,\n                          { duration : 3000, icon: 'fa fa-check'});\n                      this.$router.go();\n                  })\n                  .catch(() => {\n                      this.$toasted.show(\n                          'Ha ocurrido un error guardando la nueva categoria.',\n                          {duration: 3000, theme: 'bubble'}\n                      )\n                  })\n            },\n           createElement() {\n               if (this.elementTypeId === itemElement.id) {\n                    this.createItem();\n               } else if(this.elementTypeId === categoryElement.id) {\n                   this.createCategory();\n               } else if(this.elementTypeId === partialExamElement.id) {\n                   this.createCoursePartialExam();\n               }\n           }\n        }\n\n    });\n    var ItemMiniMenu = Vue.component('item-mini-menu', {\n        template: `\n                <div>\n                    <i class=\"fa fa-trash\" v-on:click=\"showDeleteItemDialog()\"></i>\n                </div>\n            `,\n            props: ['itemId'],\n            methods: {\n                deleteItem(){\n                    return this.$store.dispatch(g_store.actions.DELETE_ITEM, this.itemId)\n                        .then(()=> {\n                            this.$toasted.show('Se ha borrado el item', {duration: 3000});\n                            this.$router.go();\n                        })\n                        .catch(()=> {\n                            this.$toasted.\n                            show('Ha habido un error al borrar el item, no se ha borrado', {duration: 3000, theme:'bubble'});\n                        });\n                },\n                showDeleteItemDialog() {\n                    this.$modal.show('dialog', {\n                        title: 'Eliminación de item',\n                        text: 'Estas a punto de eliminar un item',\n                        buttons: [\n                            {\n                                title: 'Borrar',\n                                handler: () => {\n                                    this.deleteItem()\n                                        .finally(()=>this.$modal.hide('dialog'));\n                                }\n                            },\n                            {\n                                title: 'Cancelar'\n                            }\n                        ]\n                    })\n                },\n                }\n            }\n        );\n    var CategoryMiniMenu = Vue.component('category-mini-menu', {\n            template: `\n                <div class =\"category-mini-menu\" v-bind:style=\"style\">\n                    <i class=\"fa fa-edit\" v-on:click=\"showEditDialog\"></i>\n                    <i class=\"fa fa-plus\" v-on:click=\"showAddElementDialog\"></i>\n                    <i class=\"fa fa-trash\" v-show=\"showDelete\"\" v-on:click=\"showDeleteElementDialog\"></i>\n                </div>\n            `,\n        props: {\n            categoryId: [Number, String],\n            showDelete : {\n                type: Boolean,\n                required: false,\n                default: true\n            },\n            allowEditName : {\n                type: Boolean,\n                required: false,\n                default: true\n            }\n        },\n        data: function () {\n                return {\n                    style: {\n                        display: \"grid\",\n                        gridTemplateColumns: \"repeat(3, max-content)\",\n                        gridColumnGap: \"8px\"\n                    }\n                }\n        },\n        computed: {\n                ...Vuex.mapGetters([\n                    'categoryById'\n                ]),\n            category: function () {\n                    return this.categoryById(this.categoryId);\n                },\n        },\n        methods: {\n            deleteCategory(){\n              return this.$store.dispatch(g_store.actions.DELETE_CATEGORY, this.categoryId)\n                  .then(()=> {\n                      this.$toasted.show('Se ha borrado la categoria', {duration: 3000});\n                      this.$router.go();\n                  })\n                  .catch(()=> {\n                      this.$toasted.\n                      show('Ha habido un error al borrar la categoria, no se ha borrado', {duration: 3000, theme:'bubble'});\n                  });\n            },\n            showDeleteElementDialog() {\n                this.$modal.show('dialog', {\n                    title: 'Eliminación de categoria',\n                    text: 'Estas a punto de eliminar una categoria',\n                    buttons: [\n                        {\n                            title: 'Borrar',\n                            handler: () => {\n                                this.deleteCategory()\n                                    .finally(()=>this.$modal.hide('dialog'));\n                            }\n                        },\n                        {\n                            title: 'Cancelar'\n                        }\n                    ]\n                })\n            },\n            showEditDialog() {\n                this.$store.commit(\n                    g_store.mutations.SET_SELECTED_CATEGORY_ID,\n                    this.category.id);\n                this.$modal.show(modalsEnum.EDIT_CATEGORY);\n            },\n            showAddElementDialog() {\n                this.$store.commit(\n                    g_store.mutations.SET_SELECTED_CATEGORY_ID,\n                    this.category.id);\n                this.$modal.show(modalsEnum.ADD_ELEMENT);\n            }\n        }\n        }\n        );\n        var ThCourse = Vue.component ('th-course', {\n            template: `\n            <th \n            v-bind:colspan=\"colspan\"\n            @mouseover=\"showMenu = true\"\n            @mouseout=\"showMenu = false\"\n            >\n           \n                <flex-row align-v=\"center\" v-bind:style=\"editZoneStyles\" >\n                    <span class=\"gradeitemheader\">        \n                    {{course.fullname}}       \n                    </span>\n                    <category-mini-menu v-bind:showDelete=\"false\" v-bind:categoryId=\"category.id\"  v-show=\"showMenu\"></category-mini-menu>\n                </flex-row> \n                </th>\n            </th>\n       `,\n            props: ['colspan'],\n            data: function () {\n                return {\n                    showMenu: false,\n                    editZoneStyles: {\n                        display: 'grid',\n                        gridTemplateColumns: 'repeat(2, max-content)',\n                        gridColumnGap: '5px'\n                    }\n                }\n            },\n            computed: {\n                ...Vuex.mapState(['course']),\n                ...Vuex.mapGetters(['courseLevel', 'categoryById']),\n                courseCategoryId: function () {\n                    return this.courseLevel.object.id;\n                },\n                category: function () {\n                    return this.categoryById(this.courseCategoryId)\n                }\n            }\n\n        });\n        var CourseMiniMenu = Vue.component('course-mini-menu', {\n                template: `\n                <div v-bind:style=\"style\">\n                    <i class=\"fa fa-plus\" v-on:click=\"showAddElementDialog\"></i>\n                </div>\n            `,\n                props: ['categoryId'],\n                data: function () {\n                    return {\n                        style: {\n                            display: \"grid\",\n                            gridTemplateColumns: \"repeat(3, max-content)\",\n                            gridColumnGap: \"8px\"\n                        }\n                    }\n                },\n                computed: {\n                    ...Vuex.mapGetters([\n                        'categoryById'\n                    ]),\n                    category: function () {\n                        return this.categoryById(this.categoryId);\n                    },\n                },\n                methods: {\n                    showAddElementDialog() {\n                        this.$store.commit(\n                            g_store.mutations.SET_SELECTED_CATEGORY_ID,\n                            this.category.id);\n                        this.$modal.show(modalsEnum.ADD_ELEMENT);\n                    }\n                }\n            }\n        );\n    var ThCategory = Vue.component('th-category', {\n       template : `    \n            <th\n            :title=\"category.fullname\"\n            class=\"th-category\"\n            @mouseover=\"showMenu = true\"\n            @mouseout=\"showMenu = false\" \n            v-bind:colspan=\"childSize\" >\n                <flex-row align-v=\"center\"  v-bind:style=\"editZoneStyles\">\n                    <input v-model=\"catName\" :class=\"getCatClass\" @focus=\"catFocus\" @blur=\"catBlur\" @keyup.enter=\"$event.target.blur()\"></input>\n                    <input\n                     v-model=\"catWeight\" \n                     :class=\"catGetWeightClass\"\n                     @focus=\"catWFocus\" @blur=\"catWBlur\"\n                     @keyup.enter=\"$event.target.blur()\"\n                     v-if=\"parentCategory.aggregation == weightedAggregation\"\n                     v-on:keypress=\"isNumber($event)\"\n                     ></input>\n                    <category-mini-menu v-bind:categoryId=\"category.id\" v-show=\"showMenu\"></category-mini-menu>\n                </flex-row>\n            </th>\n       `,\n        created() {\n            let text = this.category.fullname;\n            let length = 30;\n            let clamp = '...';\n            let node = document.createElement('div');\n            node.innerHTML = text;\n            let content = node.textContent;\n            this.catName = content.length > length ? content.slice(0, length) + clamp : content;\n            this.catWeight = this.$options.filters.round(this.aggregationCoef, 2) + '%';\n        },\n        props: ['element'],\n        data: function() {\n           return {\n               showFullName: false,\n               getCatClass: 'catnotfocused',\n               catGetWeightClass: 'catwnotfocused',\n               catName: \"\",\n               catWeight: \"\",\n               editZoneStyles: {\n                   'max-height': '45px'\n               },\n               showMenu: false\n           }\n        },\n        computed: {\n            ...Vuex.mapGetters([\n                'categoryById',\n                'categoryChildSize'\n            ]),\n            ...Vuex.mapState(['items']),\n            category: function() {\n                return this.categoryById(this.element.object.id);\n            },\n            childSize: function () {\n                return this.categoryChildSize(this.category.id);\n            },\n            categoryGradeItem: function () {\n              return this.items[this.category.grade_item];\n            },\n            aggregationCoef: function () {\n              return this.categoryGradeItem.aggregationcoef;\n            },\n            parentCategory: function() {\n                return this.categoryById(this.category.parent);\n            },\n            weightedAggregation : function () {\n                return g_enums.aggregations.PROMEDIO\n            }\n        },\n        methods: {\n            isNumber: function(evt) {\n                evt = (evt) ? evt : window.event;\n                var charCode = (evt.which) ? evt.which : evt.keyCode;\n                if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\n                    evt.preventDefault();\n                } else {\n                    return true;\n                }\n            },\n            catFocus: function (){\n                //this.length = 17;\n                this.getCatClass = 'catwithfocus';\n                this.showFullName = true;\n                this.uptadeCatName();\n            },\n            catBlur: function (){\n                //this.length = 19;\n                this.getCatClass = 'catnotfocused';\n                this.showFullName = false;\n                this.updateCategoryName();\n            },\n            catWFocus: function (){\n                this.catGetWeightClass = 'catwwithfocus';\n                this.showFullName = true;\n                this.updateWeight();\n            },\n            catWBlur: function (){\n                this.catGetWeightClass = 'catwnotfocused';\n                this.showFullName = false;\n                this.saveAggregationCoef();\n            },\n            updateCategoryName: function () {\n             this.$store.dispatch(\n                 g_store.actions.UPDATE_CATEGORY,\n                 {...this.category, fullname: this.catName})\n           },\n            saveAggregationCoef: function() {\n                    this.$store.dispatch(g_store.actions.UPDATE_ITEM,\n                        {...this.categoryGradeItem, aggregationcoef: this.catWeight})\n\n            },\n            uptadeCatName: function(){\n                if(this.showFullName){\n                    this.catName = this.category.fullname;\n                }else{\n                    this.catName = this.$options.filters.trunc(this.category.fullname, 30);\n                }\n            },\n            updateWeight: function(){\n                this.catWeight = this.$options.filters.round(this.aggregationCoef, 2);\n                if(this.catGetWeightClass === 'catwnotfocused'){\n                    this.catWeight += '%';\n                }\n            }\n           }\n    });\n\n    var ItemActionsMini = Vue.component('item-actions-mini', {\n        template:`\n        \n        `,\n        props: ['itemId']\n    });\n    var ThStudentNames = Vue.component('th-student-names', {\n       template: `\n       <th class=\"th-student-names\" :style=\"stickyStyles\"> \n           <flex-row>\n               <a v-on:click=\"changeOrderToLastame()\">Apellidos</a> \n               <span>/ </span>\n               <a v-on:click=\"changeOrderToName\">Nombres</a>\n           </flex-row> \n       </th>\n       `,\n        data: function () {\n          return {\n              lastNameDirectionAsc: true,\n              firstNameDirectionAsc: true,\n              stickyStyles: {\n                  position: 'sticky',\n                  top: '0',\n                  left: '0',\n                  'background-clip': 'padding-box',\n                  'z-index': '999999'\n              }\n          }\n        },\n        methods: {\n           changeOrderToLastame() {\n\n                this.$store.commit(\n                    g_store.mutations.SET_STUDENT_SORT_METHOD,\n                    {\n                        name: g_enums.sortStudentMethods.LAST_NAME,\n                        order: this.lastNameDirectionAsc? g_enums.sortDirection.ASC : 'desc'\n                    });\n                this.lastNameDirectionAsc = !this.lastNameDirectionAsc;\n           },\n            changeOrderToName() {\n                this.$store.commit(\n                    g_store.mutations.SET_STUDENT_SORT_METHOD,\n                    {\n                        name: g_enums.sortStudentMethods.FIRST_NAME,\n                        order: this.firstNameDirectionAsc? g_enums.sortDirection.ASC : 'desc'\n                    });\n                this.firstNameDirectionAsc = !this.firstNameDirectionAsc;\n            }\n        }\n\n    });\n    var TrItems = Vue.component('tr-items', {\n        template : `\n                    <tr class=\"tr-items\">\n                    <th-student-names></th-student-names>\n                    <th colspan=\"1\" v-for=\"additionalColumnAtFirst in additionalColumnsAtFirst\" v-show=\"!additionalColumnAtFirst.hide\">{{additionalColumnAtFirst.text}}</th>\n                    <template v-for=\"(itemId, index) in orderedItemIds\">       \n                        <th-item-category \n                        v-if=\"items[itemId].itemtype === 'category'\" \n                        v-bind:itemId=\"items[itemId].id\" \n                        v-bind:colspan=\"1\"\n                        :style=\"stickyStyles\"\n                        ></th-item-category> \n                        \n                        <th-item-manual-and-mod \n                        v-if=\"items[itemId].itemtype === 'manual' || items[itemId].itemtype === 'mod'\"  \n                        v-bind:itemId=\"items[itemId].id\" \n                        ></th-item-manual-and-mod>\n                     </template>\n                     <th colspan=\"1\" v-for=\"additionalColumnAtEnd in additionalColumnsAtEnd\">{{additionalColumnAtEnd.text}}</th>\n                     </tr>\n   `,\n        computed: {\n            ...Vuex.mapGetters({\n                orderedItemIds: 'itemOrderIds'\n            }),\n            ...Vuex.mapState([\n                'additionalColumnsAtFirst',\n                'additionalColumnsAtEnd',\n                'items'\n            ])\n        },\n\n        data: function () {\n            return {\n                stickyStyles: {\n                    /*position: 'sticky',\n                    top: '0',\n                    'z-index': 4032,*/\n                    //'background-color': '#ffffff'\n                },\n            }\n        },\n    });\n        Vue.component('editable',{\n            template: `<div contenteditable=\"true\" @blur=\"update\">{{content}}<span>{{sufix}}</span></div>`,\n            props:['content', 'sufix'],\n            methods:{\n                getContent: function (event) {\n                    return event.target.innerText.replace(this.sufix, '');\n                },\n                update:function(event){\n                    this.$emit('update', this.getContent(event));\n                }\n            }\n        });\n\n        var ThItemManualAndMod = Vue.component('th-item-manual-and-mod', {\n            template : `         \n                <th class=\"th-item-manual-and-mod\"\n                v-cloak\n                 @mouseover=\"showMenuItems = true\"\n                 @mouseout=\"showMenuItems = false\"\n                 :title=\"item.itemname\"\n                ><!--v-on:click=\"deleteItem(item.id)\"-->\n                <flex-row v-bind:style=\"editZoneStyles\" align-v=\"center\">\n                    <input v-model=\"content\" :class=\"getClass\" @focus=\"focus\" @blur=\"blur\" @keydown.enter=\"saveNameChanges\" @keyup.enter=\"$event.target.blur()\"></input>\n                    <input\n                     v-model=\"weight\" \n                     :class=\"getWeightClass\"\n                     @focus=\"wfocus\" @blur=\"wblur\"\n                     @keyup.enter=\"$event.target.blur()\"\n                     v-if=\"parentCategory.aggregation == weightedAggregation\"\n                     v-on:keypress=\"isNumber($event)\"\n                     ></input>\n                    <item-mini-menu v-show=\"showMenuItems\" v-bind:itemId=\"item.id\"></item-mini-menu>\n                </flex-row>\n                </th>\n   `,       created() {\n                let text = this.item.itemname;\n                let length = 18;\n                let clamp = '...';\n                let node = document.createElement('div');\n                node.innerHTML = text;\n                let contente = node.textContent;\n                this.content = contente.length > length ? contente.slice(0, length) + clamp : contente;\n                this.weight = this.$options.filters.round(this.item.aggregationcoef, 2) + '%';\n            },\n            data: function () {\n                return {\n                    showMenuItems: false,\n                    showFullName: false,\n                    getClass: 'inotfocused',\n                    getWeightClass: 'iwnotfocused',\n                    content: \"\",\n                    weight: 0,\n                    //length: 19,\n                    editZoneStyles: {\n                        /*display: 'grid',\n                        gridTemplateColumns: 'repeat(3, max-content)',\n                        gridColumnGap: '5px',*/\n                        'max-height': '20px'\n                    },\n                }\n            },\n            props: ['itemId'],\n            methods: {\n                isNumber: function(evt) {\n                    evt = (evt) ? evt : window.event;\n                    var charCode = (evt.which) ? evt.which : evt.keyCode;\n                    if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\n                        evt.preventDefault();\n                    } else {\n                        return true;\n                    }\n                },\n                focus: function (){\n                    //this.length = 17;\n                    this.getClass = 'iwithfocus';\n                    this.showFullName = true;\n                    this.uptadeContent();\n                },\n                blur: function (){\n                    this.getClass = 'inotfocused';\n                    this.showFullName = false;\n                    if (this.content !== this.item.itemname) {\n                        this.saveNameChanges()\n                    }else{\n                        this.uptadeContent();\n                    }\n                },\n                wfocus: function (){\n                    this.getWeightClass = 'iwwithfocus';\n                    this.updateWeight();\n                },\n                wblur: function (){\n                    this.getWeightClass = 'iwnotfocused';\n                    if (parseFloat(this.weight) !== parseFloat(this.item.aggregationcoef)){\n                        this.saveAggregationCoefChanges();\n                    }else {\n                        this.updateWeight();\n                    }\n                },\n                ...Vuex.mapActions({\n                    deleteItem: g_store.actions.DELETE_ITEM\n                }),\n                saveNameChanges:function () {\n\n                    this.$store.dispatch(\n                        g_store.actions.UPDATE_ITEM,\n                        {...this.item, itemname: this.content}\n                    );\n/*                        this.$store.dispatch(\n                            g_store.actions.UPDATE_ITEM,\n                            {...this.item, itemname: this.content}\n                        );*/\n                },\n                saveAggregationCoefChanges: function() {\n                    this.$store.dispatch(\n                        g_store.actions.UPDATE_ITEM,\n                        {...this.item, aggregationcoef: this.weight}\n                    )\n                },\n                uptadeContent: function(){\n                    console.log('update');\n                    if(this.showFullName){\n                        this.content = this.item.itemname;\n                    }else{\n                        let text = this.item.itemname;\n                        let length = 18;\n                        let clamp = '...';\n                        let node = document.createElement('div');\n                        node.innerHTML = text;\n                        let content = node.textContent;\n                        this.content = content.length > length ? content.slice(0, length) + clamp : content;\n                    }\n                },\n                updateWeight: function(){\n                    console.log(this.item.aggregationcoef);\n                    this.weight = this.$options.filters.round(this.item.aggregationcoef, 2);\n                    if(this.getWeightClass === 'iwnotfocused'){\n                        this.weight += '%';\n                    }\n                }\n            },\n\n            computed: {\n                ...Vuex.mapState([\n                    'items'\n                ]),\n                ...Vuex.mapGetters(['categoryById']),\n                item: function () {\n                    return this.items[this.itemId];\n                },\n                parentCategory: function () {\n                    return this.categoryById(this.item.categoryid)\n                },\n                weightedAggregation: function (){\n                    return g_enums.aggregations.PROMEDIO;\n                },\n                /*content: function () {\n                    if(this.showFullName){\n                        return this.item.itemname;\n                    }else{\n                        let text = this.item.itemname;\n                        let length = 18;\n                        let clamp = '...';\n                        let node = document.createElement('div');\n                        node.innerHTML = text;\n                        let content = node.textContent;\n                        return content.length > length ? content.slice(0, length) + clamp : content;\n                    }\n                }*/\n            }\n        });\n\n        var ThItemCategory = Vue.component('th-item-category', {\n            template : `         \n                <th class=\"th-item-category\"v-bind:colspan=\"colspan\"\n                 :title=\"itemName\">\n                            {{itemName | trunc(20, '...')}}\n                </th>\n   `,\n            props: ['itemId', 'colspan'],\n            computed: {\n                ...Vuex.mapState([\n                    'items'\n                ]),\n                ...Vuex.mapGetters([\n                    'categoryById'\n                ]),\n                item: function () {\n                    return this.items[this.itemId];\n                },\n                categoryParent: function() {\n                    return this.categoryById(this.item.iteminstance);\n                },\n                itemName: function() {\n                    return 'TOTAL ' + this.categoryParent.fullname;\n                }\n            },\n        });\n\n        var ThStudent = Vue.component('th-student',\n            {\n                // language=HTML\n                template: `\n                <th class=\"th-student\"scope=\"row\" v-bind:style=\"stickyStyles\">\n                    {{studentFullName}}\n                </th>\n                `,\n                props: ['studentId'],\n                computed: {\n                    ...Vuex.mapGetters([\n                        'studentById'\n\n                    ]),\n                    ...Vuex.mapGetters({\n                        students: 'studentSet'\n                    }),\n                    student: function() {\n                        return this.studentById(this.studentId);\n                    },\n                    studentFullName: function() {\n                        return this.student.lastname + ' ' + this.student.firstname;\n                    }\n                },\n\n                data: function () {\n                    return {\n                        stickyStyles: {\n                            position: 'sticky',\n                            left: '0',\n                            'background-clip': 'padding-box',\n                            'min-width': '400px!important'\n                            //'z-index': 999999,\n                            //'background-color': '#ffffff'\n                        },\n                    }\n                },\n            });\n        var TdGrade = Vue.component('td-grade',\n            {\n                template: `\n                <td  class=\"td-grade\"\n                v-bind:style=\"this.inputDisabled? { 'background-color': '#e1e4fe' } : { }\"> \n                <!--{{item.itemtype}}-->\n                <input \n                class=\"grade-input\"\n                v-bind:disabled=\"inputDisabled\" \n                type=\"number\"\n                v-bind:tabindex=\"tabIndex\" \n                v-bind:step=\"step\"  \n                v-bind:max=\"grade.rawgrademax\" \n                v-bind:min=\"grade.rawgrademin\" \n                v-bind:size=\"decimalPlaces + 1\"\n                v-on:keypress=\"isNumber($event)\"\n                v-model.lazy=\"finalGrade\">\n                </td>\n                `,\n                props: ['gradeId', 'studentIndex', 'itemIndex'],\n                methods: {\n                    ...Vuex.mapActions({\n                        updateGrade: g_store.actions.UPDATE_GRADE\n                    }),\n                    isNumber: function(evt) {\n                        evt = (evt) ? evt : window.event;\n                        var charCode = (evt.which) ? evt.which : evt.keyCode;\n                        if ((charCode > 31 && (charCode < 48 || charCode > 57)) && charCode !== 46) {\n                            evt.preventDefault();\n                        } else {\n                            return true;\n                        }\n                    }\n                },\n                computed: {\n\n                    ...Vuex.mapState([\n                        'grades',\n                        'items',\n                        'course',\n                        'decimalPlaces'\n                    ]),\n                    step: function() {\n                        return Math.pow(10, -this.decimalPlaces);\n                    },\n                    ...Vuex.mapGetters([\n                        'studentsCount'\n                    ]),\n                    tabIndex: function() {\n                        return (this.itemIndex + 1) * this.studentsCount +  this.studentIndex + 1;\n                    },\n                    inputDisabled: function () {\n\n                        return this.item.itemtype==='category' || this.item.itemtype==='course' ;\n                    },\n                    grade: function() {\n                        return this.grades[this.gradeId];\n                    },\n                    item: function () {\n                        return this.items[this.grade.itemid];\n                    },\n                    finalGrade: {\n                        get() {\n                            console.log(\"getFInal\");\n                            return g_utils.round(this.grade.finalgrade, this.decimalPlaces);\n                        },\n                        set(value) {\n                            console.log(\"setFinal\");\n                            this.grade.finalgrade = value;\n                            this.updateGrade(this.grade, this.course.id);\n                        }\n                    }\n                }\n\n            });\n        var TrGrades = Vue.component('tr-grades',\n            {\n                template: `\n                <tr \n                v-bind:class=\"{is_ases: student.is_ases}\" \n                v-bind:title=\"student.is_ases? 'El estudiante pertenece al programa ASES' : ''\"\n                >\n                    <th-student v-bind:studentId=\"student.id\"></th-student>\n                    <td >{{student.username}}</td>\n                    <td-grade \n                    v-for=\"(gradeId, index) in studentGradeIdsOrdered\" \n                    :key=\"gradeId\"\n                    v-bind:studentIndex=\"studentIndex\"\n                    v-bind:itemIndex=\"index\"\n                    v-bind:gradeId=\"gradeId\"\n                    >\n                    </td-grade>\n                   \n                </tr>\n                `,\n                props: ['studentId', 'studentIndex'],\n                computed: {\n                    ...Vuex.mapState([\n                       'students',\n                        'grades'\n                    ]),\n                    ...Vuex.mapGetters([\n                        'itemOrderIds'\n                    ]),\n                    student: function() {\n                      return this.students[this.studentId];\n                    },\n                    /**\n                     * Return the student grades ordered in the same order\n                     * than `itemOrderIds`\n                     * see g_store.sate.getters.itemOrderIds\n                     */\n                    studentGradeIdsOrdered: function() {\n                        return g_utils.\n                        orderGradeIdsInItemSetOrder(\n                            this.student.gradeIds,\n                            this.grades,\n                            this.itemOrderIds\n                            );\n                    }\n                }\n            }\n            );\n\n\n\n\n       /* var Bar = Vue.component('VBar', {\n            mixins: [g_chartjs.Bar, g_vuechartjs.Bar],\n            props: {\n                chartdata: {\n                    type: Object,\n                    default: null\n                },\n                options: {\n                    type: Object,\n                    default: null\n                }\n            },\n            mounted () {\n                this.renderChart(this.chartdata, this.options)\n            }\n        });*/\n\n    /** Filter registry */\n        Vue.filter (g_filters.round.name, g_filters.round.func);\n        Vue.filter (g_filters.trun.name, g_filters.trun.func);\n\n    var router = new VueRouter({\n        routes: g_router.routes\n    });\n     var app = new Vue({\n         store: store,\n         router: router,\n         components: {\n             ThCourse,\n             EditCategoryForm,\n             ThCategory,\n             TrItems,\n             ThItemManualAndMod\n         }\n     });\n    return {\n        init: function() {\n\n            app.$mount('#app');\n\n            $(document).ready(function() {\n            });\n        }\n    };\n}\n);"],"file":"grader.min.js"}