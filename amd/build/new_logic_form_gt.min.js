define(["jquery","block_ases/bootstrap","block_ases/datatables","block_ases/sweetalert","block_ases/dphpforms_form_renderer"],function(a,b,c,d,e){return{init:function(){var b=this,c=b.get_id_instance(),d=b.generate_attendance_table();a("#modal_v2_groupal_tracking").find("form").find("h1").after(d);b.load_attendance_list(void 0,void 0,c),b.load_students_of_monitor(c)},load_students_of_monitor:function(b){var c=new Array;c.push({name:"function",value:"load_grupal"}),c.push({name:"idinstancia",value:b}),a.ajax({type:"POST",data:c,url:"../managers/user_management/usermanagement_report.php",success:function(b){if(a("#mytable tbody").html(""),0!=b.rows){var c=b.content;for(x in c)a("#mytable tbody").append("<tr> <td>"+c[x].username+"</td> <td>"+c[x].firstname+"</td> <td>"+c[x].lastname+'</td>  <td class="hide">'+c[x].idtalentos+"</td> </tr>")}else a("#list_grupal_seg").append("<a>No registra ningún estudiante a su cargo.Por favor dirigete a la oficina de Sistemas de talentos pilos para gestionar su situación</a>")},dataType:"json",cache:"false",error:function(a){alert("Error al cargar lista de estudiantes asignados del monitor")}})},generate_attendance_table:function(){var a="";return a+='<div class="mymodal-body mymodal-body_v2 col-sm-12">',a+='<div class="row">',a+='<div class= "form-group">',a+='<div data-spy="scroll" data-target=".navbar" data-offset="50" class="well col-md-12" id="list_grupal_seg_consult" name="list_grupal_seg_consult">',a+='<table id="list_students_attendance" class="table table-striped">',a+="<thead>",a+="<tr>",a+="<th>Código</th><th>Nombre</th><th>Apellido</th><th>Presente</th>",a+="</tr>",a+="</thead>",a+='<tbody id="mytbody"></tbody></table>',a+="</div></div></div></div>"},get_id_instance:function(){var a=location.search.split("&");for(var b in a)if(a[b].indexOf("instanceid")>=0){var c=a[b].split("=");return c[1]}return 0},load_attendance_list:function(b,c,d){void 0===b&&(b=null),void 0===c&&(c=null);var e=new Array;e.push({name:"function",value:"load_grupal"}),e.push({name:"idinstancia",value:d}),a.ajax({type:"POST",data:e,url:"../managers/user_management/usermanagement_report.php",success:function(c){if(a("#list_students_attendance tbody").html(""),0!=c.rows){var d=c.content;if(b)for(x in d)b.indexOf(x)!=-1?a("#modal_v2_groupal_tracking #list_students_attendance tbody").append(" <tr> <td>"+d[x].username+"</td> <td>"+d[x].firstname+"</td> <td>"+d[x].lastname+'</td>  <td><input type="checkbox" checked="checked" id="asistencia" name="asistencia"  value="'+d[x].idtalentos+'"/></td>  </tr>'):a("#modal_v2_groupal_tracking #list_students_attendance tbody").append("<tr> <td>"+d[x].username+"</td> <td>"+d[x].firstname+"</td> <td>"+d[x].lastname+'</td>  <td><input type="checkbox" id="asistencia" name="asistencia" value="'+d[x].idtalentos+'"/></td>  </tr>');else for(x in d)a("#modal_v2_groupal_tracking #list_students_attendance tbody").append("<tr> <td>"+d[x].username+"</td> <td>"+d[x].firstname+"</td> <td>"+d[x].lastname+'</td>  <td><input type="checkbox" id="asistencia" name="asistencia" value="'+d[x].idtalentos+'"/></td>  </tr>')}else a("#modal_v2_groupal_tracking #list_students_attendance").append("<a>No registra ningun estudiante a su cargo.Por favor dirigete a la oficina de Sistemas de talentos pilos para gestionar tu situación</a>")},dataType:"json",cache:"false",error:function(a){alert("error al cargar listado de asistencia")}})}}});