'use strict';define(['jquery','block_ases/loading_indicator'],function(a,b){return console.log('Plugin status initialised'),a(document).on('click','#select-visibles',function(c){c.preventDefault(),a('.user_enrolled[data-visible=\'true\']').find('.remove_check').attr('checked',!0),a('.user_enrolled[data-visible=\'true\']').find('.ucontainer').addClass('user-selected')}),a(document).on('click','#clear-selection',function(c){c.preventDefault(),a('.user_enrolled').find('.remove_check').attr('checked',!1),a('.user_enrolled').find('.ucontainer').removeClass('user-selected')}),a(document).on('click','#remove-selected',function(c){c.preventDefault();var d=[];a('.user_enrolled[data-visible=\'true\']').find('.ucontainer').each(function(){!0==a(this).find('.remove_check').prop('checked')&&d.push(a(this).data('id'))})}),a(document).on('click','.ucontainer',function(){var c=a(this),d=a(this).find('.remove_check');!0==d.prop('checked')?(d.attr('checked',!1),c.removeClass('user-selected')):(d.attr('checked',!0),c.addClass('user-selected'))}),a(document).on('click','.mfilter',function(){a('.ucontainer').find('.remove_check').attr('checked',!1),a('.ucontainer').removeClass('user-selected');var c=a(this);a('.mfilter').removeClass('filter-selected'),c.addClass('filter-selected');var d=c.data('filter');a('.ucontainer').parent().show(),a('.ucontainer').parent().attr('data-visible',!0),'all'!==d&&(a('.ucontainer').not('.ucontainer[data-glist="'+d+'"]').parent().attr('data-visible',!1),a('.ucontainer').not('.ucontainer[data-glist="'+d+'"]').parent().hide())}),b.show(),a.ajax({type:'POST',data:JSON.stringify({function:'get_users_data_by_instance',params:[450299]}),url:'../managers/plugin_status/plugin_status_api.php',dataType:'json',cache:'false',success:function success(c){b.hide();var d=[];c.data_response.forEach(function(f){var g=[],h=a(a('#user_enrolled_template').html());h.find('.ucontainer').find('.fname').text(f.user.firstname),h.find('.ucontainer').find('.lname').text(f.user.lastname),h.find('.ucontainer').attr('data-id',f.user.id),h.find('.ucontainer').attr('data-groups',JSON.stringify(f.groups)),h.find('.ucontainer').attr('data-groups-number',f.groups.length);for(var k,j=0;j<f.groups.length;j++)k=f.groups[j].name,g.push(k),d.includes(k)||d.push(k),h.find('.ucontainer').find('.groups_container').append('<span class="enrolled_group">'+f.groups[j].name+'</span>');0===f.groups.length&&(g.push('Sin grupo'),h.find('.ucontainer').find('.groups_container').append('<span class="enrolled_group">Sin grupo</span>')),h.find('.ucontainer').attr('data-glist',g),h.appendTo('#plugin_members_container')}),d.push('Sin grupo'),d.forEach(function(f){a('#step_0_selector').append('<div class="mfilter" data-filter="'+f+'">'+f+'</div>')}),a('#step_0_selector').append('<div class="mfilter filter-selected" data-filter="all">Todos (Con varios grupos)</div>')},error:function error(c){b.hide(),console.log(c)}}),{init:function init(){a(document).on('click','[data-toggle="ases-pill"]',function(){var d=a(this),f=d.parent();f.find('li').removeClass('ases-active'),d.addClass('ases-active');var g=d.data('tab'),h=a(g),j=h.parent().find('.ases-tab-pane');j.removeClass('ases-tab-active'),j.removeClass('ases-fade'),j.removeClass('ases-in'),h.addClass('ases-fade'),h.addClass('ases-in'),h.addClass('ases-tab-active')})}}});